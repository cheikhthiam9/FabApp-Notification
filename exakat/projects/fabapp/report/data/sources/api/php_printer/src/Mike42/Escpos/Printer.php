<span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><a name="l1" /></span><span style="color: #FF8000">/**<br /><a name="l2" />&nbsp;*&nbsp;This&nbsp;file&nbsp;is&nbsp;part&nbsp;of&nbsp;escpos-php:&nbsp;PHP&nbsp;receipt&nbsp;printer&nbsp;library&nbsp;for&nbsp;use&nbsp;with<br /><a name="l3" />&nbsp;*&nbsp;ESC/POS-compatible&nbsp;thermal&nbsp;and&nbsp;impact&nbsp;printers.<br /><a name="l4" />&nbsp;*<br /><a name="l5" />&nbsp;*&nbsp;Copyright&nbsp;(c)&nbsp;2014-16&nbsp;Michael&nbsp;Billington&nbsp;&lt;&nbsp;michael.billington@gmail.com&nbsp;&gt;,<br /><a name="l6" />&nbsp;*&nbsp;incorporating&nbsp;modifications&nbsp;by&nbsp;others.&nbsp;See&nbsp;CONTRIBUTORS.md&nbsp;for&nbsp;a&nbsp;full&nbsp;list.<br /><a name="l7" />&nbsp;*<br /><a name="l8" />&nbsp;*&nbsp;This&nbsp;software&nbsp;is&nbsp;distributed&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;MIT&nbsp;license.&nbsp;See&nbsp;LICENSE.md<br /><a name="l9" />&nbsp;*&nbsp;for&nbsp;details.<br /><a name="l10" />&nbsp;*/<br /><a name="l11" /><br /><a name="l12" /></span><span style="color: #007700">namespace&nbsp;</span><span style="color: #0000BB">Mike42</span><span style="color: #007700">\</span><span style="color: #0000BB">Escpos</span><span style="color: #007700">;<br /><a name="l13" /><br /><a name="l14" />use&nbsp;</span><span style="color: #0000BB">Exception</span><span style="color: #007700">;<br /><a name="l15" />use&nbsp;</span><span style="color: #0000BB">InvalidArgumentException</span><span style="color: #007700">;<br /><a name="l16" />use&nbsp;</span><span style="color: #0000BB">Mike42</span><span style="color: #007700">\</span><span style="color: #0000BB">Escpos</span><span style="color: #007700">\</span><span style="color: #0000BB">PrintBuffers</span><span style="color: #007700">\</span><span style="color: #0000BB">PrintBuffer</span><span style="color: #007700">;<br /><a name="l17" />use&nbsp;</span><span style="color: #0000BB">Mike42</span><span style="color: #007700">\</span><span style="color: #0000BB">Escpos</span><span style="color: #007700">\</span><span style="color: #0000BB">PrintBuffers</span><span style="color: #007700">\</span><span style="color: #0000BB">EscposPrintBuffer</span><span style="color: #007700">;<br /><a name="l18" />use&nbsp;</span><span style="color: #0000BB">Mike42</span><span style="color: #007700">\</span><span style="color: #0000BB">Escpos</span><span style="color: #007700">\</span><span style="color: #0000BB">PrintConnectors</span><span style="color: #007700">\</span><span style="color: #0000BB">PrintConnector</span><span style="color: #007700">;<br /><a name="l19" />use&nbsp;</span><span style="color: #0000BB">Mike42</span><span style="color: #007700">\</span><span style="color: #0000BB">Escpos</span><span style="color: #007700">\</span><span style="color: #0000BB">CapabilityProfiles</span><span style="color: #007700">\</span><span style="color: #0000BB">AbstractCapabilityProfile</span><span style="color: #007700">;<br /><a name="l20" />use&nbsp;</span><span style="color: #0000BB">Mike42</span><span style="color: #007700">\</span><span style="color: #0000BB">Escpos</span><span style="color: #007700">\</span><span style="color: #0000BB">CapabilityProfiles</span><span style="color: #007700">\</span><span style="color: #0000BB">DefaultCapabilityProfile</span><span style="color: #007700">;<br /><a name="l21" /><br /><a name="l22" /></span><span style="color: #FF8000">/**<br /><a name="l23" />&nbsp;*&nbsp;Main&nbsp;class&nbsp;for&nbsp;ESC/POS&nbsp;code&nbsp;generation<br /><a name="l24" />&nbsp;*/<br /><a name="l25" /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">Printer<br /><a name="l26" /></span><span style="color: #007700">{<br /><a name="l27" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l28" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;ASCII&nbsp;null&nbsp;control&nbsp;character<br /><a name="l29" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l30" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">NUL&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"\x00"</span><span style="color: #007700">;<br /><a name="l31" /><br /><a name="l32" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l33" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;ASCII&nbsp;linefeed&nbsp;control&nbsp;character<br /><a name="l34" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l35" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">LF&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"\x0a"</span><span style="color: #007700">;<br /><a name="l36" /><br /><a name="l37" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l38" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;ASCII&nbsp;escape&nbsp;control&nbsp;character<br /><a name="l39" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l40" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">ESC&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"\x1b"</span><span style="color: #007700">;<br /><a name="l41" /><br /><a name="l42" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l43" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;ASCII&nbsp;form&nbsp;separator&nbsp;control&nbsp;character<br /><a name="l44" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l45" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">FS&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"\x1c"</span><span style="color: #007700">;<br /><a name="l46" /><br /><a name="l47" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l48" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;ASCII&nbsp;form&nbsp;feed&nbsp;control&nbsp;character<br /><a name="l49" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l50" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">FF&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"\x0c"</span><span style="color: #007700">;<br /><a name="l51" /><br /><a name="l52" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l53" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;ASCII&nbsp;group&nbsp;separator&nbsp;control&nbsp;character<br /><a name="l54" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l55" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">GS&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"\x1d"</span><span style="color: #007700">;<br /><a name="l56" /><br /><a name="l57" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l58" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;ASCII&nbsp;data&nbsp;link&nbsp;escape&nbsp;control&nbsp;character<br /><a name="l59" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l60" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">DLE&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"\x10"</span><span style="color: #007700">;<br /><a name="l61" /><br /><a name="l62" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l63" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;ASCII&nbsp;end&nbsp;of&nbsp;transmission&nbsp;control&nbsp;character<br /><a name="l64" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l65" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">EOT&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"\x04"</span><span style="color: #007700">;<br /><a name="l66" /><br /><a name="l67" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l68" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;UPC-A&nbsp;barcode&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::barcode<br /><a name="l69" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l70" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">BARCODE_UPCA&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">65</span><span style="color: #007700">;<br /><a name="l71" /><br /><a name="l72" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l73" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;UPC-E&nbsp;barcode&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::barcode<br /><a name="l74" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l75" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">BARCODE_UPCE&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">66</span><span style="color: #007700">;<br /><a name="l76" /><br /><a name="l77" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l78" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;JAN13&nbsp;barcode&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::barcode<br /><a name="l79" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l80" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">BARCODE_JAN13&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">67</span><span style="color: #007700">;<br /><a name="l81" /><br /><a name="l82" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l83" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;JAN8&nbsp;barcode&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::barcode<br /><a name="l84" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l85" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">BARCODE_JAN8&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">68</span><span style="color: #007700">;<br /><a name="l86" /><br /><a name="l87" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l88" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;CODE39&nbsp;barcode&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::barcode<br /><a name="l89" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l90" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">BARCODE_CODE39&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">69</span><span style="color: #007700">;<br /><a name="l91" /><br /><a name="l92" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l93" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;ITF&nbsp;barcode&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::barcode<br /><a name="l94" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l95" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">BARCODE_ITF&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">70</span><span style="color: #007700">;<br /><a name="l96" /><br /><a name="l97" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l98" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;CODABAR&nbsp;barcode&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::barcode<br /><a name="l99" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l100" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">BARCODE_CODABAR&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">71</span><span style="color: #007700">;<br /><a name="l101" /><br /><a name="l102" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l103" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;CODE93&nbsp;barcode&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::barcode<br /><a name="l104" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l105" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">BARCODE_CODE93&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">72</span><span style="color: #007700">;<br /><a name="l106" /><br /><a name="l107" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l108" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;CODE128&nbsp;barcode&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::barcode<br /><a name="l109" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l110" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">BARCODE_CODE128&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">73</span><span style="color: #007700">;<br /><a name="l111" /><br /><a name="l112" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l113" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;that&nbsp;HRI&nbsp;(human-readable&nbsp;interpretation)&nbsp;text&nbsp;should&nbsp;not&nbsp;be<br /><a name="l114" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;printed,&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::setBarcodeTextPosition<br /><a name="l115" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l116" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">BARCODE_TEXT_NONE&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br /><a name="l117" /><br /><a name="l118" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l119" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;that&nbsp;HRI&nbsp;(human-readable&nbsp;interpretation)&nbsp;text&nbsp;should&nbsp;be&nbsp;printed<br /><a name="l120" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;above&nbsp;a&nbsp;barcode,&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::setBarcodeTextPosition<br /><a name="l121" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l122" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">BARCODE_TEXT_ABOVE&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /><a name="l123" /><br /><a name="l124" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l125" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;that&nbsp;HRI&nbsp;(human-readable&nbsp;interpretation)&nbsp;text&nbsp;should&nbsp;be&nbsp;printed<br /><a name="l126" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;below&nbsp;a&nbsp;barcode,&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::setBarcodeTextPosition<br /><a name="l127" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l128" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">BARCODE_TEXT_BELOW&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br /><a name="l129" /><br /><a name="l130" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l131" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Use&nbsp;the&nbsp;first&nbsp;color&nbsp;(usually&nbsp;black),&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::setColor<br /><a name="l132" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l133" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">COLOR_1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br /><a name="l134" /><br /><a name="l135" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l136" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Use&nbsp;the&nbsp;second&nbsp;color&nbsp;(usually&nbsp;red&nbsp;or&nbsp;blue),&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::setColor<br /><a name="l137" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l138" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">COLOR_2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /><a name="l139" /><br /><a name="l140" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l141" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Make&nbsp;a&nbsp;full&nbsp;cut,&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::cut<br /><a name="l142" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l143" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">CUT_FULL&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">65</span><span style="color: #007700">;<br /><a name="l144" /><br /><a name="l145" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l146" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Make&nbsp;a&nbsp;partial&nbsp;cut,&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::cut<br /><a name="l147" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l148" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">CUT_PARTIAL&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">66</span><span style="color: #007700">;<br /><a name="l149" /><br /><a name="l150" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l151" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Use&nbsp;Font&nbsp;A,&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::setFont<br /><a name="l152" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l153" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">FONT_A&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br /><a name="l154" /><br /><a name="l155" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l156" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Use&nbsp;Font&nbsp;B,&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::setFont<br /><a name="l157" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l158" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">FONT_B&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /><a name="l159" /><br /><a name="l160" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l161" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Use&nbsp;Font&nbsp;C,&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::setFont<br /><a name="l162" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l163" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">FONT_C&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br /><a name="l164" /><br /><a name="l165" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l166" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Use&nbsp;default&nbsp;(high&nbsp;density)&nbsp;image&nbsp;size,&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::graphics,<br /><a name="l167" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Printer::bitImage&nbsp;or&nbsp;Printer::bitImageColumnFormat<br /><a name="l168" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l169" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">IMG_DEFAULT&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br /><a name="l170" /><br /><a name="l171" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l172" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Use&nbsp;lower&nbsp;horizontal&nbsp;density&nbsp;for&nbsp;image&nbsp;printing,&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::graphics,<br /><a name="l173" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Printer::bitImage&nbsp;or&nbsp;Printer::bitImageColumnFormat<br /><a name="l174" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l175" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">IMG_DOUBLE_WIDTH&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /><a name="l176" /><br /><a name="l177" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l178" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Use&nbsp;lower&nbsp;vertical&nbsp;density&nbsp;for&nbsp;image&nbsp;printing,&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::graphics,<br /><a name="l179" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Printer::bitImage&nbsp;or&nbsp;Printer::bitImageColumnFormat<br /><a name="l180" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l181" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">IMG_DOUBLE_HEIGHT&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br /><a name="l182" /><br /><a name="l183" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l184" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Align&nbsp;text&nbsp;to&nbsp;the&nbsp;left,&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::setJustification<br /><a name="l185" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l186" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">JUSTIFY_LEFT&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br /><a name="l187" /><br /><a name="l188" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l189" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Center&nbsp;text,&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::setJustification<br /><a name="l190" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l191" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">JUSTIFY_CENTER&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /><a name="l192" /><br /><a name="l193" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l194" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Align&nbsp;text&nbsp;to&nbsp;the&nbsp;right,&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::setJustification<br /><a name="l195" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l196" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">JUSTIFY_RIGHT&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br /><a name="l197" /><br /><a name="l198" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l199" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Use&nbsp;Font&nbsp;A,&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::selectPrintMode<br /><a name="l200" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l201" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">MODE_FONT_A&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br /><a name="l202" /><br /><a name="l203" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l204" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Use&nbsp;Font&nbsp;B,&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::selectPrintMode<br /><a name="l205" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l206" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">MODE_FONT_B&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /><a name="l207" /><br /><a name="l208" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l209" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Use&nbsp;text&nbsp;emphasis,&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::selectPrintMode<br /><a name="l210" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l211" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">MODE_EMPHASIZED&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">8</span><span style="color: #007700">;<br /><a name="l212" /><br /><a name="l213" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l214" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Use&nbsp;double&nbsp;height&nbsp;text,&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::selectPrintMode<br /><a name="l215" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l216" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">MODE_DOUBLE_HEIGHT&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">16</span><span style="color: #007700">;<br /><a name="l217" /><br /><a name="l218" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l219" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Use&nbsp;double&nbsp;width&nbsp;text,&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::selectPrintMode<br /><a name="l220" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l221" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">MODE_DOUBLE_WIDTH&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">32</span><span style="color: #007700">;<br /><a name="l222" /><br /><a name="l223" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l224" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Underline&nbsp;text,&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::selectPrintMode<br /><a name="l225" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l226" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">MODE_UNDERLINE&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">128</span><span style="color: #007700">;<br /><a name="l227" /><br /><a name="l228" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l229" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;error&nbsp;correction&nbsp;level&nbsp;L&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::qrCode<br /><a name="l230" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l231" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">QR_ECLEVEL_L&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br /><a name="l232" /><br /><a name="l233" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l234" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;error&nbsp;correction&nbsp;level&nbsp;M&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::qrCode<br /><a name="l235" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l236" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">QR_ECLEVEL_M&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /><a name="l237" /><br /><a name="l238" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l239" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;error&nbsp;correction&nbsp;level&nbsp;Q&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::qrCode<br /><a name="l240" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l241" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">QR_ECLEVEL_Q&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br /><a name="l242" /><br /><a name="l243" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l244" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;error&nbsp;correction&nbsp;level&nbsp;H&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::qrCode<br /><a name="l245" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l246" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">QR_ECLEVEL_H&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">;<br /><a name="l247" /><br /><a name="l248" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l249" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;QR&nbsp;model&nbsp;1&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::qrCode<br /><a name="l250" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l251" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">QR_MODEL_1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /><a name="l252" /><br /><a name="l253" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l254" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;QR&nbsp;model&nbsp;2&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::qrCode<br /><a name="l255" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l256" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">QR_MODEL_2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br /><a name="l257" /><br /><a name="l258" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l259" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;micro&nbsp;QR&nbsp;code&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::qrCode<br /><a name="l260" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l261" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">QR_MICRO&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">;<br /><a name="l262" /><br /><a name="l263" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l264" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;a&nbsp;request&nbsp;for&nbsp;printer&nbsp;status&nbsp;when&nbsp;used&nbsp;with<br /><a name="l265" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Printer::getPrinterStatus&nbsp;(experimental)<br /><a name="l266" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l267" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">STATUS_PRINTER&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /><a name="l268" /><br /><a name="l269" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l270" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;a&nbsp;request&nbsp;for&nbsp;printer&nbsp;offline&nbsp;cause&nbsp;when&nbsp;used&nbsp;with<br /><a name="l271" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Printer::getPrinterStatus&nbsp;(experimental)<br /><a name="l272" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l273" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">STATUS_OFFLINE_CAUSE&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br /><a name="l274" /><br /><a name="l275" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l276" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;a&nbsp;request&nbsp;for&nbsp;error&nbsp;cause&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::getPrinterStatus<br /><a name="l277" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;(experimental)<br /><a name="l278" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l279" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">STATUS_ERROR_CAUSE&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">;<br /><a name="l280" /><br /><a name="l281" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l282" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;a&nbsp;request&nbsp;for&nbsp;error&nbsp;cause&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::getPrinterStatus<br /><a name="l283" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;(experimental)<br /><a name="l284" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l285" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">STATUS_PAPER_ROLL&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">;<br /><a name="l286" /><br /><a name="l287" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l288" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;a&nbsp;request&nbsp;for&nbsp;ink&nbsp;A&nbsp;status&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::getPrinterStatus<br /><a name="l289" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;(experimental)<br /><a name="l290" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l291" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">STATUS_INK_A&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">7</span><span style="color: #007700">;<br /><a name="l292" /><br /><a name="l293" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l294" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;a&nbsp;request&nbsp;for&nbsp;ink&nbsp;B&nbsp;status&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::getPrinterStatus<br /><a name="l295" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;(experimental)<br /><a name="l296" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l297" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">STATUS_INK_B&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">6</span><span style="color: #007700">;<br /><a name="l298" /><br /><a name="l299" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l300" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;a&nbsp;request&nbsp;for&nbsp;peeler&nbsp;status&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::getPrinterStatus<br /><a name="l301" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;(experimental)<br /><a name="l302" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l303" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">STATUS_PEELER&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">8</span><span style="color: #007700">;<br /><a name="l304" /><br /><a name="l305" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l306" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;no&nbsp;underline&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::setUnderline<br /><a name="l307" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l308" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">UNDERLINE_NONE&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br /><a name="l309" /><br /><a name="l310" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l311" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;single&nbsp;underline&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::setUnderline<br /><a name="l312" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l313" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">UNDERLINE_SINGLE&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /><a name="l314" /><br /><a name="l315" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l316" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indicates&nbsp;double&nbsp;underline&nbsp;when&nbsp;used&nbsp;with&nbsp;Printer::setUnderline<br /><a name="l317" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l318" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">const&nbsp;</span><span style="color: #0000BB">UNDERLINE_DOUBLE&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br /><a name="l319" /><br /><a name="l320" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l321" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;PrintBuffer&nbsp;$buffer<br /><a name="l322" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;The&nbsp;printer's&nbsp;output&nbsp;buffer.<br /><a name="l323" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l324" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;</span><span style="color: #0000BB">$buffer</span><span style="color: #007700">;<br /><a name="l325" /><br /><a name="l326" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l327" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;PrintConnector&nbsp;$connector<br /><a name="l328" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;Connector&nbsp;showing&nbsp;how&nbsp;to&nbsp;print&nbsp;to&nbsp;this&nbsp;printer<br /><a name="l329" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l330" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;</span><span style="color: #0000BB">$connector</span><span style="color: #007700">;<br /><a name="l331" /><br /><a name="l332" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l333" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;AbstractCapabilityProfile&nbsp;$profile<br /><a name="l334" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;Profile&nbsp;showing&nbsp;supported&nbsp;features&nbsp;for&nbsp;this&nbsp;printer<br /><a name="l335" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l336" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;</span><span style="color: #0000BB">$profile</span><span style="color: #007700">;<br /><a name="l337" /><br /><a name="l338" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l339" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;int&nbsp;$characterTable<br /><a name="l340" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;Current&nbsp;character&nbsp;code&nbsp;table<br /><a name="l341" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l342" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;</span><span style="color: #0000BB">$characterTable</span><span style="color: #007700">;<br /><a name="l343" /><br /><a name="l344" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l345" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Construct&nbsp;a&nbsp;new&nbsp;print&nbsp;object<br /><a name="l346" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l347" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;PrintConnector&nbsp;$connector&nbsp;The&nbsp;PrintConnector&nbsp;to&nbsp;send&nbsp;data&nbsp;to.&nbsp;If&nbsp;not&nbsp;set,&nbsp;output&nbsp;is&nbsp;sent&nbsp;to&nbsp;standard&nbsp;output.<br /><a name="l348" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;AbstractCapabilityProfile&nbsp;$profile&nbsp;Supported&nbsp;features&nbsp;of&nbsp;this&nbsp;printer.&nbsp;If&nbsp;not&nbsp;set,&nbsp;the&nbsp;DefaultCapabilityProfile&nbsp;will&nbsp;be&nbsp;used,&nbsp;which&nbsp;is&nbsp;suitable&nbsp;for&nbsp;Epson&nbsp;printers.<br /><a name="l349" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;InvalidArgumentException<br /><a name="l350" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l351" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">__construct</span><span style="color: #007700">(</span><span style="color: #0000BB">PrintConnector&nbsp;$connector</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">AbstractCapabilityProfile&nbsp;$profile&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br /><a name="l352" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l353" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Set&nbsp;connector&nbsp;*/<br /><a name="l354" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$connector</span><span style="color: #007700">;<br /><a name="l355" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l356" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Set&nbsp;capability&nbsp;profile&nbsp;*/<br /><a name="l357" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$profile&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)&nbsp;{<br /><a name="l358" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$profile&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">DefaultCapabilityProfile</span><span style="color: #007700">::</span><span style="color: #0000BB">getInstance</span><span style="color: #007700">();<br /><a name="l359" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l360" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">profile&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$profile</span><span style="color: #007700">;<br /><a name="l361" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Set&nbsp;buffer&nbsp;*/<br /><a name="l362" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$buffer&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">EscposPrintBuffer</span><span style="color: #007700">();<br /><a name="l363" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">buffer&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br /><a name="l364" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">setPrintBuffer</span><span style="color: #007700">(</span><span style="color: #0000BB">$buffer</span><span style="color: #007700">);<br /><a name="l365" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">initialize</span><span style="color: #007700">();<br /><a name="l366" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l367" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l368" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l369" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Print&nbsp;a&nbsp;barcode.<br /><a name="l370" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l371" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$content&nbsp;The&nbsp;information&nbsp;to&nbsp;encode.<br /><a name="l372" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$type&nbsp;The&nbsp;barcode&nbsp;standard&nbsp;to&nbsp;output.&nbsp;Supported&nbsp;values&nbsp;are<br /><a name="l373" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;`Printer::BARCODE_UPCA`,&nbsp;`Printer::BARCODE_UPCE`,&nbsp;`Printer::BARCODE_JAN13`,<br /><a name="l374" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;`Printer::BARCODE_JAN8`,&nbsp;`Printer::BARCODE_CODE39`,&nbsp;`Printer::BARCODE_ITF`,<br /><a name="l375" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;`Printer::BARCODE_CODABAR`,&nbsp;`Printer::BARCODE_CODE93`,&nbsp;and&nbsp;`Printer::BARCODE_CODE128`.<br /><a name="l376" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;not&nbsp;specified,&nbsp;`Printer::BARCODE_CODE39`&nbsp;will&nbsp;be&nbsp;used.&nbsp;Note&nbsp;that&nbsp;some<br /><a name="l377" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;barcode&nbsp;formats&nbsp;only&nbsp;support&nbsp;specific&nbsp;lengths&nbsp;or&nbsp;sets&nbsp;of&nbsp;characters,&nbsp;and&nbsp;that<br /><a name="l378" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;available&nbsp;barcode&nbsp;types&nbsp;vary&nbsp;between&nbsp;printers.<br /><a name="l379" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;InvalidArgumentException&nbsp;Where&nbsp;the&nbsp;length&nbsp;or&nbsp;characters&nbsp;used&nbsp;in&nbsp;$content&nbsp;is&nbsp;invalid&nbsp;for&nbsp;the&nbsp;requested&nbsp;barcode&nbsp;format.<br /><a name="l380" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l381" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">barcode</span><span style="color: #007700">(</span><span style="color: #0000BB">$content</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$type&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">BARCODE_CODE39</span><span style="color: #007700">)<br /><a name="l382" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l383" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Validate&nbsp;input&nbsp;*/<br /><a name="l384" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$type</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">65</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">73</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Barcode&nbsp;type"</span><span style="color: #007700">);<br /><a name="l385" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$len&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$content</span><span style="color: #007700">);<br /><a name="l386" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(</span><span style="color: #0000BB">$type</span><span style="color: #007700">)&nbsp;{<br /><a name="l387" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">BARCODE_UPCA</span><span style="color: #007700">:<br /><a name="l388" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$len</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">11</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">12</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"UPCA&nbsp;barcode&nbsp;content&nbsp;length"</span><span style="color: #007700">);<br /><a name="l389" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateStringRegex</span><span style="color: #007700">(</span><span style="color: #0000BB">$content</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"/^[0-9]{11,12}$/"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"UPCA&nbsp;barcode&nbsp;content"</span><span style="color: #007700">);<br /><a name="l390" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br /><a name="l391" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">BARCODE_UPCE</span><span style="color: #007700">:<br /><a name="l392" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateIntegerMulti</span><span style="color: #007700">(</span><span style="color: #0000BB">$len</span><span style="color: #007700">,&nbsp;array(array(</span><span style="color: #0000BB">6</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">8</span><span style="color: #007700">),&nbsp;array(</span><span style="color: #0000BB">11</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">12</span><span style="color: #007700">)),&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"UPCE&nbsp;barcode&nbsp;content&nbsp;length"</span><span style="color: #007700">);<br /><a name="l393" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateStringRegex</span><span style="color: #007700">(</span><span style="color: #0000BB">$content</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"/^([0-9]{6,8}|[0-9]{11,12})$/"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"UPCE&nbsp;barcode&nbsp;content"</span><span style="color: #007700">);<br /><a name="l394" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br /><a name="l395" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">BARCODE_JAN13</span><span style="color: #007700">:<br /><a name="l396" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$len</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">12</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">13</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"JAN13&nbsp;barcode&nbsp;content&nbsp;length"</span><span style="color: #007700">);<br /><a name="l397" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateStringRegex</span><span style="color: #007700">(</span><span style="color: #0000BB">$content</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"/^[0-9]{12,13}$/"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"JAN13&nbsp;barcode&nbsp;content"</span><span style="color: #007700">);<br /><a name="l398" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br /><a name="l399" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">BARCODE_JAN8</span><span style="color: #007700">:<br /><a name="l400" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$len</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">7</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">8</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"JAN8&nbsp;barcode&nbsp;content&nbsp;length"</span><span style="color: #007700">);<br /><a name="l401" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateStringRegex</span><span style="color: #007700">(</span><span style="color: #0000BB">$content</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"/^[0-9]{7,8}$/"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"JAN8&nbsp;barcode&nbsp;content"</span><span style="color: #007700">);<br /><a name="l402" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br /><a name="l403" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">BARCODE_CODE39</span><span style="color: #007700">:<br /><a name="l404" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$len</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">255</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"CODE39&nbsp;barcode&nbsp;content&nbsp;length"</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;255&nbsp;is&nbsp;a&nbsp;limitation&nbsp;of&nbsp;the&nbsp;"function&nbsp;b"&nbsp;command,&nbsp;not&nbsp;the&nbsp;barcode&nbsp;format.<br /><a name="l405" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateStringRegex</span><span style="color: #007700">(</span><span style="color: #0000BB">$content</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"/^([0-9A-Z&nbsp;\$\%\+\-\.\/]+|\*[0-9A-Z&nbsp;\$\%\+\-\.\/]+\*)$/"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"CODE39&nbsp;barcode&nbsp;content"</span><span style="color: #007700">);<br /><a name="l406" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br /><a name="l407" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">BARCODE_ITF</span><span style="color: #007700">:<br /><a name="l408" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$len</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">255</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"ITF&nbsp;barcode&nbsp;content&nbsp;length"</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;255&nbsp;is&nbsp;a&nbsp;limitation&nbsp;of&nbsp;the&nbsp;"function&nbsp;b"&nbsp;command,&nbsp;not&nbsp;the&nbsp;barcode&nbsp;format.<br /><a name="l409" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateStringRegex</span><span style="color: #007700">(</span><span style="color: #0000BB">$content</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"/^([0-9]{2})+$/"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"ITF&nbsp;barcode&nbsp;content"</span><span style="color: #007700">);<br /><a name="l410" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br /><a name="l411" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">BARCODE_CODABAR</span><span style="color: #007700">:<br /><a name="l412" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$len</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">255</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Codabar&nbsp;barcode&nbsp;content&nbsp;length"</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;255&nbsp;is&nbsp;a&nbsp;limitation&nbsp;of&nbsp;the&nbsp;"function&nbsp;b"&nbsp;command,&nbsp;not&nbsp;the&nbsp;barcode&nbsp;format.<br /><a name="l413" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateStringRegex</span><span style="color: #007700">(</span><span style="color: #0000BB">$content</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"/^[A-Da-d][0-9\$\+\-\.\/\:]+[A-Da-d]$/"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Codabar&nbsp;barcode&nbsp;content"</span><span style="color: #007700">);<br /><a name="l414" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br /><a name="l415" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">BARCODE_CODE93</span><span style="color: #007700">:<br /><a name="l416" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$len</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">255</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Code93&nbsp;barcode&nbsp;content&nbsp;length"</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;255&nbsp;is&nbsp;a&nbsp;limitation&nbsp;of&nbsp;the&nbsp;"function&nbsp;b"&nbsp;command,&nbsp;not&nbsp;the&nbsp;barcode&nbsp;format.<br /><a name="l417" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateStringRegex</span><span style="color: #007700">(</span><span style="color: #0000BB">$content</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"/^[\\x00-\\x7F]+$/"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Code93&nbsp;barcode&nbsp;content"</span><span style="color: #007700">);<br /><a name="l418" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br /><a name="l419" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">BARCODE_CODE128</span><span style="color: #007700">:<br /><a name="l420" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$len</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">255</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Code128&nbsp;barcode&nbsp;content&nbsp;length"</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;255&nbsp;is&nbsp;a&nbsp;limitation&nbsp;of&nbsp;the&nbsp;"function&nbsp;b"&nbsp;command,&nbsp;not&nbsp;the&nbsp;barcode&nbsp;format.<br /><a name="l421" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;CODE128&nbsp;encoder&nbsp;is&nbsp;quite&nbsp;complex,&nbsp;so&nbsp;only&nbsp;a&nbsp;very&nbsp;basic&nbsp;header-check&nbsp;is&nbsp;applied&nbsp;here.<br /><a name="l422" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateStringRegex</span><span style="color: #007700">(</span><span style="color: #0000BB">$content</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"/^\{[A-C][\\x00-\\x7F]+$/"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Code128&nbsp;barcode&nbsp;content"</span><span style="color: #007700">);<br /><a name="l423" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br /><a name="l424" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l425" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">profile&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">getSupportsBarcodeB</span><span style="color: #007700">())&nbsp;{<br /><a name="l426" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;A&nbsp;simpler&nbsp;barcode&nbsp;command&nbsp;which&nbsp;supports&nbsp;fewer&nbsp;codes<br /><a name="l427" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$type</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">65</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">71</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l428" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">GS&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"k"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$type&nbsp;</span><span style="color: #007700">-&nbsp;</span><span style="color: #0000BB">65</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #0000BB">$content&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">NUL</span><span style="color: #007700">);<br /><a name="l429" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br /><a name="l430" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l431" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;More&nbsp;advanced&nbsp;function&nbsp;B,&nbsp;used&nbsp;in&nbsp;preference<br /><a name="l432" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">GS&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"k"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$type</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$content</span><span style="color: #007700">))&nbsp;.&nbsp;</span><span style="color: #0000BB">$content</span><span style="color: #007700">);<br /><a name="l433" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l434" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l435" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l436" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Print&nbsp;an&nbsp;image,&nbsp;using&nbsp;the&nbsp;older&nbsp;"bit&nbsp;image"&nbsp;command.&nbsp;This&nbsp;creates&nbsp;padding&nbsp;on&nbsp;the&nbsp;right&nbsp;of&nbsp;the&nbsp;image,<br /><a name="l437" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;if&nbsp;its&nbsp;width&nbsp;is&nbsp;not&nbsp;divisible&nbsp;by&nbsp;8.<br /><a name="l438" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l439" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Should&nbsp;only&nbsp;be&nbsp;used&nbsp;if&nbsp;your&nbsp;printer&nbsp;does&nbsp;not&nbsp;support&nbsp;the&nbsp;graphics()&nbsp;command.<br /><a name="l440" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;See&nbsp;also&nbsp;bitImageColumnFormat().<br /><a name="l441" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l442" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;EscposImage&nbsp;$img&nbsp;The&nbsp;image&nbsp;to&nbsp;print<br /><a name="l443" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$size&nbsp;Size&nbsp;modifier&nbsp;for&nbsp;the&nbsp;image.&nbsp;Must&nbsp;be&nbsp;either&nbsp;`Printer::IMG_DEFAULT`<br /><a name="l444" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;(default),&nbsp;or&nbsp;any&nbsp;combination&nbsp;of&nbsp;the&nbsp;`Printer::IMG_DOUBLE_HEIGHT`&nbsp;and<br /><a name="l445" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;`Printer::IMG_DOUBLE_WIDTH`&nbsp;flags.<br /><a name="l446" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l447" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">bitImage</span><span style="color: #007700">(</span><span style="color: #0000BB">EscposImage&nbsp;$img</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$size&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">IMG_DEFAULT</span><span style="color: #007700">)<br /><a name="l448" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l449" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$size</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l450" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rasterData&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$img&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">toRasterFormat</span><span style="color: #007700">();<br /><a name="l451" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$header&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">dataHeader</span><span style="color: #007700">(array(</span><span style="color: #0000BB">$img&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">getWidthBytes</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">$img&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">getHeight</span><span style="color: #007700">()),&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br /><a name="l452" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">GS&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"v0"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$size</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #0000BB">$header</span><span style="color: #007700">);<br /><a name="l453" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">$rasterData</span><span style="color: #007700">);<br /><a name="l454" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l455" /><br /><a name="l456" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l457" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Print&nbsp;an&nbsp;image,&nbsp;using&nbsp;the&nbsp;older&nbsp;"bit&nbsp;image"&nbsp;command&nbsp;in&nbsp;column&nbsp;format.<br /><a name="l458" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l459" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Should&nbsp;only&nbsp;be&nbsp;used&nbsp;if&nbsp;your&nbsp;printer&nbsp;does&nbsp;not&nbsp;support&nbsp;the&nbsp;graphics()&nbsp;or<br /><a name="l460" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;bitImage()&nbsp;commands.<br /><a name="l461" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l462" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;EscposImage&nbsp;$img&nbsp;The&nbsp;image&nbsp;to&nbsp;print<br /><a name="l463" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$size&nbsp;Size&nbsp;modifier&nbsp;for&nbsp;the&nbsp;image.&nbsp;Must&nbsp;be&nbsp;either&nbsp;`Printer::IMG_DEFAULT`<br /><a name="l464" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;(default),&nbsp;or&nbsp;any&nbsp;combination&nbsp;of&nbsp;the&nbsp;`Printer::IMG_DOUBLE_HEIGHT`&nbsp;and<br /><a name="l465" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;`Printer::IMG_DOUBLE_WIDTH`&nbsp;flags.<br /><a name="l466" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l467" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">bitImageColumnFormat</span><span style="color: #007700">(</span><span style="color: #0000BB">EscposImage&nbsp;$img</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$size&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">IMG_DEFAULT</span><span style="color: #007700">)<br /><a name="l468" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l469" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$highDensityVertical&nbsp;</span><span style="color: #007700">=&nbsp;!&nbsp;((</span><span style="color: #0000BB">$size&nbsp;</span><span style="color: #007700">&amp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">IMG_DOUBLE_HEIGHT</span><span style="color: #007700">)&nbsp;==&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">IMG_DOUBLE_HEIGHT</span><span style="color: #007700">);<br /><a name="l470" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$highDensityHorizontal&nbsp;</span><span style="color: #007700">=&nbsp;!&nbsp;((</span><span style="color: #0000BB">$size&nbsp;</span><span style="color: #007700">&amp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">IMG_DOUBLE_WIDTH</span><span style="color: #007700">)&nbsp;==&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">IMG_DOUBLE_WIDTH</span><span style="color: #007700">);<br /><a name="l471" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Experimental&nbsp;column&nbsp;format&nbsp;printing<br /><a name="l472" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;This&nbsp;feature&nbsp;is&nbsp;not&nbsp;yet&nbsp;complete&nbsp;and&nbsp;may&nbsp;produce&nbsp;unpredictable&nbsp;results.<br /><a name="l473" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">ESC&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"3"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">16</span><span style="color: #007700">));&nbsp;</span><span style="color: #FF8000">//&nbsp;16-dot&nbsp;line&nbsp;spacing.&nbsp;This&nbsp;is&nbsp;the&nbsp;correct&nbsp;value&nbsp;on&nbsp;both&nbsp;TM-T20&nbsp;and&nbsp;TM-U220<br /><a name="l474" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Header&nbsp;and&nbsp;density&nbsp;code&nbsp;(0,&nbsp;1,&nbsp;32,&nbsp;33)&nbsp;re-used&nbsp;for&nbsp;every&nbsp;line<br /><a name="l475" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$densityCode&nbsp;</span><span style="color: #007700">=&nbsp;(</span><span style="color: #0000BB">$highDensityHorizontal&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;+&nbsp;(</span><span style="color: #0000BB">$highDensityVertical&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #0000BB">32&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br /><a name="l476" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$colFormatData&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$img&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">toColumnFormat</span><span style="color: #007700">(</span><span style="color: #0000BB">$highDensityVertical</span><span style="color: #007700">);<br /><a name="l477" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$header&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">dataHeader</span><span style="color: #007700">(array(</span><span style="color: #0000BB">$img&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">getWidth</span><span style="color: #007700">()),&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br /><a name="l478" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$colFormatData&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$line</span><span style="color: #007700">)&nbsp;{<br /><a name="l479" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Print&nbsp;each&nbsp;line,&nbsp;double&nbsp;density&nbsp;etc&nbsp;for&nbsp;printing&nbsp;are&nbsp;set&nbsp;here&nbsp;also<br /><a name="l480" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">ESC&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"*"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$densityCode</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #0000BB">$header&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$line</span><span style="color: #007700">);<br /><a name="l481" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">feed</span><span style="color: #007700">();<br /><a name="l482" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;sleep(0.1);&nbsp;//&nbsp;Reduces&nbsp;the&nbsp;amount&nbsp;of&nbsp;trouble&nbsp;that&nbsp;a&nbsp;TM-U220&nbsp;has&nbsp;keeping&nbsp;up&nbsp;with&nbsp;large&nbsp;images<br /><a name="l483" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /><a name="l484" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">ESC&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"2"</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;Revert&nbsp;to&nbsp;default&nbsp;line&nbsp;spacing<br /><a name="l485" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /><a name="l486" /><br /><a name="l487" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l488" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Close&nbsp;the&nbsp;underlying&nbsp;buffer.&nbsp;With&nbsp;some&nbsp;connectors,&nbsp;the<br /><a name="l489" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;job&nbsp;will&nbsp;not&nbsp;actually&nbsp;be&nbsp;sent&nbsp;to&nbsp;the&nbsp;printer&nbsp;until&nbsp;this&nbsp;is&nbsp;called.<br /><a name="l490" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l491" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">close</span><span style="color: #007700">()<br /><a name="l492" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l493" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">finalize</span><span style="color: #007700">();<br /><a name="l494" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l495" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l496" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l497" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Cut&nbsp;the&nbsp;paper.<br /><a name="l498" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l499" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$mode&nbsp;Cut&nbsp;mode,&nbsp;either&nbsp;Printer::CUT_FULL&nbsp;or&nbsp;Printer::CUT_PARTIAL.&nbsp;If&nbsp;not&nbsp;specified,&nbsp;`Printer::CUT_FULL`&nbsp;will&nbsp;be&nbsp;used.<br /><a name="l500" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$lines&nbsp;Number&nbsp;of&nbsp;lines&nbsp;to&nbsp;feed<br /><a name="l501" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l502" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">cut</span><span style="color: #007700">(</span><span style="color: #0000BB">$mode&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">CUT_FULL</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$lines&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">)<br /><a name="l503" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l504" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;TODO&nbsp;validation&nbsp;on&nbsp;cut()&nbsp;inputs<br /><a name="l505" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">GS&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"V"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$mode</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$lines</span><span style="color: #007700">));<br /><a name="l506" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l507" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l508" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l509" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Print&nbsp;and&nbsp;feed&nbsp;line&nbsp;/&nbsp;Print&nbsp;and&nbsp;feed&nbsp;n&nbsp;lines.<br /><a name="l510" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l511" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$lines&nbsp;Number&nbsp;of&nbsp;lines&nbsp;to&nbsp;feed<br /><a name="l512" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l513" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">feed</span><span style="color: #007700">(</span><span style="color: #0000BB">$lines&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">)<br /><a name="l514" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l515" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$lines</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">255</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l516" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$lines&nbsp;</span><span style="color: #007700">&lt;=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">)&nbsp;{<br /><a name="l517" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">LF</span><span style="color: #007700">);<br /><a name="l518" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br /><a name="l519" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">ESC&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"d"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$lines</span><span style="color: #007700">));<br /><a name="l520" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l521" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l522" /><br /><a name="l523" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l524" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Some&nbsp;printers&nbsp;require&nbsp;a&nbsp;form&nbsp;feed&nbsp;to&nbsp;release&nbsp;the&nbsp;paper.&nbsp;On&nbsp;most&nbsp;printers,&nbsp;this<br /><a name="l525" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;command&nbsp;is&nbsp;only&nbsp;useful&nbsp;in&nbsp;page&nbsp;mode,&nbsp;which&nbsp;is&nbsp;not&nbsp;implemented&nbsp;in&nbsp;this&nbsp;driver.<br /><a name="l526" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l527" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">feedForm</span><span style="color: #007700">()<br /><a name="l528" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l529" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">FF</span><span style="color: #007700">);<br /><a name="l530" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l531" /><br /><a name="l532" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l533" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Print&nbsp;and&nbsp;reverse&nbsp;feed&nbsp;n&nbsp;lines.<br /><a name="l534" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l535" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$lines&nbsp;number&nbsp;of&nbsp;lines&nbsp;to&nbsp;feed.&nbsp;If&nbsp;not&nbsp;specified,&nbsp;1&nbsp;line&nbsp;will&nbsp;be&nbsp;fed.<br /><a name="l536" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l537" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">feedReverse</span><span style="color: #007700">(</span><span style="color: #0000BB">$lines&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">)<br /><a name="l538" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l539" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$lines</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">255</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l540" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">ESC&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"e"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$lines</span><span style="color: #007700">));<br /><a name="l541" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l542" /><br /><a name="l543" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l544" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;number<br /><a name="l545" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l546" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">getCharacterTable</span><span style="color: #007700">()<br /><a name="l547" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l548" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">characterTable</span><span style="color: #007700">;<br /><a name="l549" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l550" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l551" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l552" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;PrintBuffer<br /><a name="l553" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l554" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">getPrintBuffer</span><span style="color: #007700">()<br /><a name="l555" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l556" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">buffer</span><span style="color: #007700">;<br /><a name="l557" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l558" /><br /><a name="l559" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l560" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;PrintConnector<br /><a name="l561" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l562" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">getPrintConnector</span><span style="color: #007700">()<br /><a name="l563" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l564" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector</span><span style="color: #007700">;<br /><a name="l565" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l566" /><br /><a name="l567" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l568" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;AbstractCapabilityProfile<br /><a name="l569" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l570" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">getPrinterCapabilityProfile</span><span style="color: #007700">()<br /><a name="l571" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l572" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">profile</span><span style="color: #007700">;<br /><a name="l573" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l574" /><br /><a name="l575" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l576" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$type&nbsp;The&nbsp;type&nbsp;of&nbsp;status&nbsp;to&nbsp;request.&nbsp;May&nbsp;be&nbsp;any&nbsp;of&nbsp;the&nbsp;Printer::STATUS_*&nbsp;constants<br /><a name="l577" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;stdClass&nbsp;Class&nbsp;containing&nbsp;requested&nbsp;status,&nbsp;or&nbsp;null&nbsp;if&nbsp;either&nbsp;no&nbsp;status&nbsp;was&nbsp;received,&nbsp;or&nbsp;your&nbsp;print&nbsp;connector&nbsp;is&nbsp;unable&nbsp;to&nbsp;read&nbsp;from&nbsp;the&nbsp;printer.<br /><a name="l578" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l579" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">getPrinterStatus</span><span style="color: #007700">(</span><span style="color: #0000BB">$type&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">STATUS_PRINTER</span><span style="color: #007700">)<br /><a name="l580" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l581" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateIntegerMulti</span><span style="color: #007700">(</span><span style="color: #0000BB">$type</span><span style="color: #007700">,&nbsp;array(array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">),&nbsp;array(</span><span style="color: #0000BB">6</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">8</span><span style="color: #007700">)),&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l582" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Determine&nbsp;which&nbsp;flags&nbsp;we&nbsp;are&nbsp;looking&nbsp;for<br /><a name="l583" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$statusFlags&nbsp;</span><span style="color: #007700">=&nbsp;array(<br /><a name="l584" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">STATUS_PRINTER&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br /><a name="l585" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">4&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"pulseHigh"</span><span style="color: #007700">,&nbsp;</span><span style="color: #FF8000">//&nbsp;connector&nbsp;pin&nbsp;3,&nbsp;see&nbsp;pulse().<br /><a name="l586" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">8&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"offline"</span><span style="color: #007700">,<br /><a name="l587" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">32&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"waitingForOnlineRecovery"</span><span style="color: #007700">,<br /><a name="l588" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">64&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"feedButtonPressed"<br /><a name="l589" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">),<br /><a name="l590" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">STATUS_OFFLINE_CAUSE&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br /><a name="l591" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">4&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"coverOpen"</span><span style="color: #007700">,<br /><a name="l592" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">8&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"paperManualFeed"</span><span style="color: #007700">,<br /><a name="l593" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">32&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"paperEnd"</span><span style="color: #007700">,<br /><a name="l594" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">64&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"errorOccurred"<br /><a name="l595" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">),<br /><a name="l596" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">STATUS_ERROR_CAUSE&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br /><a name="l597" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">4&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"recoverableError"</span><span style="color: #007700">,<br /><a name="l598" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">8&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"autocutterError"</span><span style="color: #007700">,<br /><a name="l599" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">32&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"unrecoverableError"</span><span style="color: #007700">,<br /><a name="l600" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">64&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"autorecoverableError"<br /><a name="l601" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">),<br /><a name="l602" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">STATUS_PAPER_ROLL&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br /><a name="l603" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">4&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"paperNearEnd"</span><span style="color: #007700">,<br /><a name="l604" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">32&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"paperNotPresent"<br /><a name="l605" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">),<br /><a name="l606" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">STATUS_INK_A&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br /><a name="l607" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">4&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"inkNearEnd"</span><span style="color: #007700">,<br /><a name="l608" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">8&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"inkEnd"</span><span style="color: #007700">,<br /><a name="l609" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">32&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"inkNotPresent"</span><span style="color: #007700">,<br /><a name="l610" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">64&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"cleaning"<br /><a name="l611" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">),<br /><a name="l612" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">STATUS_INK_B&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br /><a name="l613" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">4&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"inkNearEnd"</span><span style="color: #007700">,<br /><a name="l614" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">8&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"inkEnd"</span><span style="color: #007700">,<br /><a name="l615" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">32&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"inkNotPresent"<br /><a name="l616" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">),<br /><a name="l617" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">STATUS_PEELER&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br /><a name="l618" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">4&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"labelWaitingForRemoval"</span><span style="color: #007700">,<br /><a name="l619" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">32&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"labelPaperNotDetected"<br /><a name="l620" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">)<br /><a name="l621" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br /><a name="l622" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$flags&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$statusFlags</span><span style="color: #007700">[</span><span style="color: #0000BB">$type</span><span style="color: #007700">];<br /><a name="l623" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Clear&nbsp;any&nbsp;previous&nbsp;statuses&nbsp;which&nbsp;haven't&nbsp;been&nbsp;read&nbsp;yet<br /><a name="l624" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$f&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">read</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><a name="l625" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Make&nbsp;request<br /><a name="l626" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$reqC&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$type</span><span style="color: #007700">);<br /><a name="l627" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(</span><span style="color: #0000BB">$type</span><span style="color: #007700">)&nbsp;{<br /><a name="l628" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Special&nbsp;cases:&nbsp;These&nbsp;are&nbsp;two-character&nbsp;requests<br /><a name="l629" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">case&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">STATUS_INK_A</span><span style="color: #007700">:<br /><a name="l630" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$reqC&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">7</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><a name="l631" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br /><a name="l632" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">STATUS_INK_B</span><span style="color: #007700">:<br /><a name="l633" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$reqC&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">7</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /><a name="l634" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br /><a name="l635" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">STATUS_PEELER</span><span style="color: #007700">:<br /><a name="l636" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$reqC&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">8</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">3</span><span style="color: #007700">);<br /><a name="l637" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br /><a name="l638" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l639" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">DLE&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">EOT&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$reqC</span><span style="color: #007700">);<br /><a name="l640" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Wait&nbsp;for&nbsp;single-character&nbsp;response<br /><a name="l641" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$f&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">read</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><a name="l642" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br /><a name="l643" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;((</span><span style="color: #0000BB">$f&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">false&nbsp;</span><span style="color: #007700">||&nbsp;</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$f</span><span style="color: #007700">)&nbsp;==&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">50000</span><span style="color: #007700">)&nbsp;{<br /><a name="l644" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">usleep</span><span style="color: #007700">(</span><span style="color: #0000BB">100</span><span style="color: #007700">);<br /><a name="l645" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$f&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">read</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><a name="l646" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++;<br /><a name="l647" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l648" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$f&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">false&nbsp;</span><span style="color: #007700">||&nbsp;</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$f</span><span style="color: #007700">)&nbsp;==&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;{<br /><a name="l649" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Timeout<br /><a name="l650" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br /><a name="l651" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l652" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$ret&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;\</span><span style="color: #0000BB">stdClass</span><span style="color: #007700">();<br /><a name="l653" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$flags&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$num&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">)&nbsp;{<br /><a name="l654" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$ret&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&nbsp;(</span><span style="color: #0000BB">ord</span><span style="color: #007700">(</span><span style="color: #0000BB">$f</span><span style="color: #007700">)&nbsp;&amp;&nbsp;</span><span style="color: #0000BB">$num</span><span style="color: #007700">)&nbsp;!=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br /><a name="l655" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l656" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$ret</span><span style="color: #007700">;<br /><a name="l657" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l658" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l659" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l660" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Print&nbsp;an&nbsp;image&nbsp;to&nbsp;the&nbsp;printer.<br /><a name="l661" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l662" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Size&nbsp;modifiers&nbsp;are:<br /><a name="l663" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;-&nbsp;Printer::IMG_DEFAULT&nbsp;(leave&nbsp;image&nbsp;at&nbsp;original&nbsp;size)<br /><a name="l664" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;-&nbsp;Printer::IMG_DOUBLE_WIDTH<br /><a name="l665" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;-&nbsp;Printer::IMG_DOUBLE_HEIGHT<br /><a name="l666" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l667" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;See&nbsp;the&nbsp;example/&nbsp;folder&nbsp;for&nbsp;detailed&nbsp;examples.<br /><a name="l668" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l669" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;functions&nbsp;bitImage()&nbsp;and&nbsp;bitImageColumnFormat()&nbsp;take&nbsp;the&nbsp;same<br /><a name="l670" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;parameters,&nbsp;and&nbsp;can&nbsp;be&nbsp;used&nbsp;if&nbsp;your&nbsp;printer&nbsp;doesn't&nbsp;support&nbsp;the&nbsp;newer<br /><a name="l671" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;graphics&nbsp;commands.<br /><a name="l672" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l673" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;EscposImage&nbsp;$img&nbsp;The&nbsp;image&nbsp;to&nbsp;print.<br /><a name="l674" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$size&nbsp;Size&nbsp;modifier&nbsp;for&nbsp;the&nbsp;image.&nbsp;Must&nbsp;be&nbsp;either&nbsp;`Printer::IMG_DEFAULT`<br /><a name="l675" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;(default),&nbsp;or&nbsp;any&nbsp;combination&nbsp;of&nbsp;the&nbsp;`Printer::IMG_DOUBLE_HEIGHT`&nbsp;and<br /><a name="l676" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;`Printer::IMG_DOUBLE_WIDTH`&nbsp;flags.<br /><a name="l677" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l678" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">graphics</span><span style="color: #007700">(</span><span style="color: #0000BB">EscposImage&nbsp;$img</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$size&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">IMG_DEFAULT</span><span style="color: #007700">)<br /><a name="l679" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l680" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$size</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l681" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rasterData&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$img&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">toRasterFormat</span><span style="color: #007700">();<br /><a name="l682" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$imgHeader&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">dataHeader</span><span style="color: #007700">(array(</span><span style="color: #0000BB">$img&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">getWidth</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">$img&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">getHeight</span><span style="color: #007700">()),&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br /><a name="l683" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tone&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'0'</span><span style="color: #007700">;<br /><a name="l684" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$colors&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'1'</span><span style="color: #007700">;<br /><a name="l685" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$xm&nbsp;</span><span style="color: #007700">=&nbsp;((</span><span style="color: #0000BB">$size&nbsp;</span><span style="color: #007700">&amp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">IMG_DOUBLE_WIDTH</span><span style="color: #007700">)&nbsp;==&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">IMG_DOUBLE_WIDTH</span><span style="color: #007700">)&nbsp;?&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">)&nbsp;:&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><a name="l686" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$ym&nbsp;</span><span style="color: #007700">=&nbsp;((</span><span style="color: #0000BB">$size&nbsp;</span><span style="color: #007700">&amp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">IMG_DOUBLE_HEIGHT</span><span style="color: #007700">)&nbsp;==&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">IMG_DOUBLE_HEIGHT</span><span style="color: #007700">)&nbsp;?&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">)&nbsp;:&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><a name="l687" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$header&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$tone&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$xm&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$ym&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$colors&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$imgHeader</span><span style="color: #007700">;<br /><a name="l688" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">wrapperSendGraphicsData</span><span style="color: #007700">(</span><span style="color: #DD0000">'0'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'p'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$header&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$rasterData</span><span style="color: #007700">);<br /><a name="l689" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">wrapperSendGraphicsData</span><span style="color: #007700">(</span><span style="color: #DD0000">'0'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'2'</span><span style="color: #007700">);<br /><a name="l690" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l691" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l692" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l693" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Initialize&nbsp;printer.&nbsp;This&nbsp;resets&nbsp;formatting&nbsp;back&nbsp;to&nbsp;the&nbsp;defaults.<br /><a name="l694" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l695" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">initialize</span><span style="color: #007700">()<br /><a name="l696" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l697" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">ESC&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"@"</span><span style="color: #007700">);<br /><a name="l698" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">characterTable&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br /><a name="l699" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l700" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l701" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l702" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Generate&nbsp;a&nbsp;pulse,&nbsp;for&nbsp;opening&nbsp;a&nbsp;cash&nbsp;drawer&nbsp;if&nbsp;one&nbsp;is&nbsp;connected.<br /><a name="l703" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;default&nbsp;settings&nbsp;should&nbsp;open&nbsp;an&nbsp;Epson&nbsp;drawer.<br /><a name="l704" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l705" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$pin&nbsp;0&nbsp;or&nbsp;1,&nbsp;for&nbsp;pin&nbsp;2&nbsp;or&nbsp;pin&nbsp;5&nbsp;kick-out&nbsp;connector&nbsp;respectively.<br /><a name="l706" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$on_ms&nbsp;pulse&nbsp;ON&nbsp;time,&nbsp;in&nbsp;milliseconds.<br /><a name="l707" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$off_ms&nbsp;pulse&nbsp;OFF&nbsp;time,&nbsp;in&nbsp;milliseconds.<br /><a name="l708" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l709" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">pulse</span><span style="color: #007700">(</span><span style="color: #0000BB">$pin&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$on_ms&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">120</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$off_ms&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">240</span><span style="color: #007700">)<br /><a name="l710" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l711" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$pin</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l712" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$on_ms</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">511</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l713" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$off_ms</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">511</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l714" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">ESC&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"p"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$pin&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">48</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$on_ms&nbsp;</span><span style="color: #007700">/&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$off_ms&nbsp;</span><span style="color: #007700">/&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">));<br /><a name="l715" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l716" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l717" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l718" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Print&nbsp;the&nbsp;given&nbsp;data&nbsp;as&nbsp;a&nbsp;QR&nbsp;code&nbsp;on&nbsp;the&nbsp;printer.<br /><a name="l719" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l720" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$content&nbsp;The&nbsp;content&nbsp;of&nbsp;the&nbsp;code.&nbsp;Numeric&nbsp;data&nbsp;will&nbsp;be&nbsp;more&nbsp;efficiently&nbsp;compacted.<br /><a name="l721" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$ec&nbsp;Error-correction&nbsp;level&nbsp;to&nbsp;use.&nbsp;One&nbsp;of&nbsp;Printer::QR_ECLEVEL_L&nbsp;(default),&nbsp;Printer::QR_ECLEVEL_M,&nbsp;Printer::QR_ECLEVEL_Q&nbsp;or&nbsp;Printer::QR_ECLEVEL_H.&nbsp;Higher&nbsp;error&nbsp;correction&nbsp;results&nbsp;in&nbsp;a&nbsp;less&nbsp;compact&nbsp;code.<br /><a name="l722" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$size&nbsp;Pixel&nbsp;size&nbsp;to&nbsp;use.&nbsp;Must&nbsp;be&nbsp;1-16&nbsp;(default&nbsp;3)<br /><a name="l723" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$model&nbsp;QR&nbsp;code&nbsp;model&nbsp;to&nbsp;use.&nbsp;Must&nbsp;be&nbsp;one&nbsp;of&nbsp;Printer::QR_MODEL_1,&nbsp;Printer::QR_MODEL_2&nbsp;(default)&nbsp;or&nbsp;Printer::QR_MICRO&nbsp;(not&nbsp;supported&nbsp;by&nbsp;all&nbsp;printers).<br /><a name="l724" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l725" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">qrCode</span><span style="color: #007700">(</span><span style="color: #0000BB">$content</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ec&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">QR_ECLEVEL_L</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$size&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$model&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">QR_MODEL_2</span><span style="color: #007700">)<br /><a name="l726" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l727" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateString</span><span style="color: #007700">(</span><span style="color: #0000BB">$content</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l728" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$ec</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l729" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$size</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">16</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l730" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$model</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l731" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$content&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">)&nbsp;{<br /><a name="l732" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br /><a name="l733" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l734" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">profile&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">getSupportsQrCode</span><span style="color: #007700">())&nbsp;{<br /><a name="l735" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;TODO&nbsp;use&nbsp;software&nbsp;rendering&nbsp;via&nbsp;phpqrcode&nbsp;instead<br /><a name="l736" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">throw&nbsp;new&nbsp;</span><span style="color: #0000BB">Exception</span><span style="color: #007700">(</span><span style="color: #DD0000">"QR&nbsp;codes&nbsp;are&nbsp;not&nbsp;supported&nbsp;on&nbsp;your&nbsp;printer."</span><span style="color: #007700">);<br /><a name="l737" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l738" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$cn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'1'</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;Code&nbsp;type&nbsp;for&nbsp;QR&nbsp;code<br /><a name="l739" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Select&nbsp;model:&nbsp;1,&nbsp;2&nbsp;or&nbsp;micro.<br /><a name="l740" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">wrapperSend2dCodeData</span><span style="color: #007700">(</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">65</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">$cn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">48&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">$model</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">));<br /><a name="l741" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Set&nbsp;dot&nbsp;size.<br /><a name="l742" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">wrapperSend2dCodeData</span><span style="color: #007700">(</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">67</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">$cn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$size</span><span style="color: #007700">));<br /><a name="l743" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Set&nbsp;error&nbsp;correction&nbsp;level:&nbsp;L,&nbsp;M,&nbsp;Q,&nbsp;or&nbsp;H<br /><a name="l744" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">wrapperSend2dCodeData</span><span style="color: #007700">(</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">69</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">$cn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">48&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">$ec</span><span style="color: #007700">));<br /><a name="l745" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Send&nbsp;content&nbsp;&amp;&nbsp;print<br /><a name="l746" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">wrapperSend2dCodeData</span><span style="color: #007700">(</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">80</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">$cn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$content</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'0'</span><span style="color: #007700">);<br /><a name="l747" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">wrapperSend2dCodeData</span><span style="color: #007700">(</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">81</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">$cn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'0'</span><span style="color: #007700">);<br /><a name="l748" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l749" /><br /><a name="l750" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l751" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Switch&nbsp;character&nbsp;table&nbsp;(code&nbsp;page)&nbsp;manually.&nbsp;Used&nbsp;in&nbsp;conjunction&nbsp;with&nbsp;textRaw()&nbsp;to<br /><a name="l752" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;print&nbsp;special&nbsp;characters&nbsp;which&nbsp;can't&nbsp;be&nbsp;encoded&nbsp;automatically.<br /><a name="l753" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l754" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$table&nbsp;The&nbsp;table&nbsp;to&nbsp;select.&nbsp;Available&nbsp;code&nbsp;tables&nbsp;are&nbsp;model-specific.<br /><a name="l755" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l756" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">selectCharacterTable</span><span style="color: #007700">(</span><span style="color: #0000BB">$table&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br /><a name="l757" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l758" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$table</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">255</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l759" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$supported&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">profile&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">getSupportedCodePages</span><span style="color: #007700">();<br /><a name="l760" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!isset(</span><span style="color: #0000BB">$supported</span><span style="color: #007700">[</span><span style="color: #0000BB">$table</span><span style="color: #007700">]))&nbsp;{<br /><a name="l761" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;</span><span style="color: #0000BB">InvalidArgumentException</span><span style="color: #007700">(</span><span style="color: #DD0000">"There&nbsp;is&nbsp;no&nbsp;code&nbsp;table&nbsp;</span><span style="color: #0000BB">$table</span><span style="color: #DD0000">&nbsp;allowed&nbsp;by&nbsp;this&nbsp;printer's&nbsp;capability&nbsp;profile."</span><span style="color: #007700">);<br /><a name="l762" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l763" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">characterTable&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$table</span><span style="color: #007700">;<br /><a name="l764" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">profile&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">getSupportsStarCommands</span><span style="color: #007700">())&nbsp;{<br /><a name="l765" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Not&nbsp;an&nbsp;ESC/POS&nbsp;command:&nbsp;STAR&nbsp;printers&nbsp;stash&nbsp;all&nbsp;the&nbsp;extra&nbsp;code&nbsp;pages&nbsp;under&nbsp;a&nbsp;different&nbsp;command.&nbsp;*/<br /><a name="l766" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">ESC&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">GS&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"t"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$table</span><span style="color: #007700">));<br /><a name="l767" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br /><a name="l768" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l769" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">ESC&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"t"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$table</span><span style="color: #007700">));<br /><a name="l770" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l771" /><br /><a name="l772" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l773" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Select&nbsp;print&nbsp;mode(s).<br /><a name="l774" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l775" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Several&nbsp;MODE_*&nbsp;constants&nbsp;can&nbsp;be&nbsp;OR'd&nbsp;together&nbsp;passed&nbsp;to&nbsp;this&nbsp;function's&nbsp;`$mode`&nbsp;argument.&nbsp;The&nbsp;valid&nbsp;modes&nbsp;are:<br /><a name="l776" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;-&nbsp;Printer::MODE_FONT_A<br /><a name="l777" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;-&nbsp;Printer::MODE_FONT_B<br /><a name="l778" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;-&nbsp;Printer::MODE_EMPHASIZED<br /><a name="l779" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;-&nbsp;Printer::MODE_DOUBLE_HEIGHT<br /><a name="l780" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;-&nbsp;Printer::MODE_DOUBLE_WIDTH<br /><a name="l781" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;-&nbsp;Printer::MODE_UNDERLINE<br /><a name="l782" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l783" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$mode&nbsp;The&nbsp;mode&nbsp;to&nbsp;use.&nbsp;Default&nbsp;is&nbsp;Printer::MODE_FONT_A,&nbsp;with&nbsp;no&nbsp;special&nbsp;formatting.&nbsp;This&nbsp;has&nbsp;a&nbsp;similar&nbsp;effect&nbsp;to&nbsp;running&nbsp;initialize().<br /><a name="l784" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l785" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">selectPrintMode</span><span style="color: #007700">(</span><span style="color: #0000BB">$mode&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">MODE_FONT_A</span><span style="color: #007700">)<br /><a name="l786" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l787" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$allModes&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">MODE_FONT_B&nbsp;</span><span style="color: #007700">|&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">MODE_EMPHASIZED&nbsp;</span><span style="color: #007700">|&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">MODE_DOUBLE_HEIGHT&nbsp;</span><span style="color: #007700">|&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">MODE_DOUBLE_WIDTH&nbsp;</span><span style="color: #007700">|&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">MODE_UNDERLINE</span><span style="color: #007700">;<br /><a name="l788" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">is_integer</span><span style="color: #007700">(</span><span style="color: #0000BB">$mode</span><span style="color: #007700">)&nbsp;||&nbsp;</span><span style="color: #0000BB">$mode&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">0&nbsp;</span><span style="color: #007700">||&nbsp;(</span><span style="color: #0000BB">$mode&nbsp;</span><span style="color: #007700">&amp;&nbsp;</span><span style="color: #0000BB">$allModes</span><span style="color: #007700">)&nbsp;!=&nbsp;</span><span style="color: #0000BB">$mode</span><span style="color: #007700">)&nbsp;{<br /><a name="l789" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;</span><span style="color: #0000BB">InvalidArgumentException</span><span style="color: #007700">(</span><span style="color: #DD0000">"Invalid&nbsp;mode"</span><span style="color: #007700">);<br /><a name="l790" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l791" /><br /><a name="l792" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">ESC&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"!"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$mode</span><span style="color: #007700">));<br /><a name="l793" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l794" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l795" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l796" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Set&nbsp;barcode&nbsp;height.<br /><a name="l797" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l798" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$height&nbsp;Height&nbsp;in&nbsp;dots.&nbsp;If&nbsp;not&nbsp;specified,&nbsp;8&nbsp;will&nbsp;be&nbsp;used.<br /><a name="l799" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l800" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">setBarcodeHeight</span><span style="color: #007700">(</span><span style="color: #0000BB">$height&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">8</span><span style="color: #007700">)<br /><a name="l801" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l802" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$height</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">255</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l803" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">GS&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"h"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$height</span><span style="color: #007700">));<br /><a name="l804" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l805" /><br /><a name="l806" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l807" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Set&nbsp;barcode&nbsp;bar&nbsp;width.<br /><a name="l808" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l809" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$width&nbsp;Bar&nbsp;width&nbsp;in&nbsp;dots.&nbsp;If&nbsp;not&nbsp;specified,&nbsp;3&nbsp;will&nbsp;be&nbsp;used.<br /><a name="l810" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;Values&nbsp;above&nbsp;6&nbsp;appear&nbsp;to&nbsp;have&nbsp;no&nbsp;effect.<br /><a name="l811" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l812" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">setBarcodeWidth</span><span style="color: #007700">(</span><span style="color: #0000BB">$width&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">)<br /><a name="l813" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l814" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$width</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">255</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l815" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">GS&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"w"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$width</span><span style="color: #007700">));<br /><a name="l816" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l817" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l818" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l819" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Set&nbsp;the&nbsp;position&nbsp;for&nbsp;the&nbsp;Human&nbsp;Readable&nbsp;Interpretation&nbsp;(HRI)&nbsp;of&nbsp;barcode&nbsp;characters.<br /><a name="l820" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l821" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$position.&nbsp;Use&nbsp;Printer::BARCODE_TEXT_NONE&nbsp;to&nbsp;hide&nbsp;the&nbsp;text&nbsp;(default),<br /><a name="l822" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;or&nbsp;any&nbsp;combination&nbsp;of&nbsp;Printer::BARCODE_TEXT_ABOVE&nbsp;and&nbsp;Printer::BARCODE_TEXT_BELOW<br /><a name="l823" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;flags&nbsp;to&nbsp;display&nbsp;the&nbsp;text.<br /><a name="l824" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l825" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">setBarcodeTextPosition</span><span style="color: #007700">(</span><span style="color: #0000BB">$position&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">BARCODE_TEXT_NONE</span><span style="color: #007700">)<br /><a name="l826" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l827" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$position</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Barcode&nbsp;text&nbsp;position"</span><span style="color: #007700">);<br /><a name="l828" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">GS&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"H"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$position</span><span style="color: #007700">));<br /><a name="l829" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l830" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l831" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l832" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Turn&nbsp;double-strike&nbsp;mode&nbsp;on/off.<br /><a name="l833" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l834" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;boolean&nbsp;$on&nbsp;true&nbsp;for&nbsp;double&nbsp;strike,&nbsp;false&nbsp;for&nbsp;no&nbsp;double&nbsp;strike<br /><a name="l835" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l836" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">setDoubleStrike</span><span style="color: #007700">(</span><span style="color: #0000BB">$on&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br /><a name="l837" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l838" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateBoolean</span><span style="color: #007700">(</span><span style="color: #0000BB">$on</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l839" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">ESC&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"G"</span><span style="color: #007700">.&nbsp;(</span><span style="color: #0000BB">$on&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">)&nbsp;:&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">)));<br /><a name="l840" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l841" /><br /><a name="l842" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l843" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Select&nbsp;print&nbsp;color&nbsp;on&nbsp;printers&nbsp;that&nbsp;support&nbsp;multiple&nbsp;colors.<br /><a name="l844" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l845" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$color&nbsp;Color&nbsp;to&nbsp;use.&nbsp;Must&nbsp;be&nbsp;either&nbsp;Printer::COLOR_1&nbsp;(default),&nbsp;or&nbsp;Printer::COLOR_2.<br /><a name="l846" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l847" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">setColor</span><span style="color: #007700">(</span><span style="color: #0000BB">$color&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">COLOR_1</span><span style="color: #007700">)<br /><a name="l848" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l849" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$color</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Color"</span><span style="color: #007700">);<br /><a name="l850" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">ESC&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"r"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$color</span><span style="color: #007700">));<br /><a name="l851" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l852" /><br /><a name="l853" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l854" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Turn&nbsp;emphasized&nbsp;mode&nbsp;on/off.<br /><a name="l855" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l856" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;@param&nbsp;boolean&nbsp;$on&nbsp;true&nbsp;for&nbsp;emphasis,&nbsp;false&nbsp;for&nbsp;no&nbsp;emphasis<br /><a name="l857" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l858" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">setEmphasis</span><span style="color: #007700">(</span><span style="color: #0000BB">$on&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br /><a name="l859" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l860" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateBoolean</span><span style="color: #007700">(</span><span style="color: #0000BB">$on</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l861" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">ESC&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"E"</span><span style="color: #007700">.&nbsp;(</span><span style="color: #0000BB">$on&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">)&nbsp;:&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">)));<br /><a name="l862" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l863" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l864" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l865" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Select&nbsp;font.&nbsp;Most&nbsp;printers&nbsp;have&nbsp;two&nbsp;fonts&nbsp;(Fonts&nbsp;A&nbsp;and&nbsp;B),&nbsp;and&nbsp;some&nbsp;have&nbsp;a&nbsp;third&nbsp;(Font&nbsp;C).<br /><a name="l866" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l867" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$font&nbsp;The&nbsp;font&nbsp;to&nbsp;use.&nbsp;Must&nbsp;be&nbsp;either&nbsp;Printer::FONT_A,&nbsp;Printer::FONT_B,&nbsp;or&nbsp;Printer::FONT_C.<br /><a name="l868" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l869" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">setFont</span><span style="color: #007700">(</span><span style="color: #0000BB">$font&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">FONT_A</span><span style="color: #007700">)<br /><a name="l870" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l871" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$font</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l872" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">ESC&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"M"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$font</span><span style="color: #007700">));<br /><a name="l873" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l874" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l875" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l876" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Select&nbsp;justification.<br /><a name="l877" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l878" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$justification&nbsp;One&nbsp;of&nbsp;Printer::JUSTIFY_LEFT,&nbsp;Printer::JUSTIFY_CENTER,&nbsp;or&nbsp;Printer::JUSTIFY_RIGHT.<br /><a name="l879" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l880" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">setJustification</span><span style="color: #007700">(</span><span style="color: #0000BB">$justification&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">JUSTIFY_LEFT</span><span style="color: #007700">)<br /><a name="l881" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l882" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$justification</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l883" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">ESC&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"a"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$justification</span><span style="color: #007700">));<br /><a name="l884" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l885" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l886" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l887" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Attach&nbsp;a&nbsp;different&nbsp;print&nbsp;buffer&nbsp;to&nbsp;the&nbsp;printer.&nbsp;Buffers&nbsp;are&nbsp;responsible&nbsp;for&nbsp;handling&nbsp;text&nbsp;output&nbsp;to&nbsp;the&nbsp;printer.<br /><a name="l888" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l889" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;PrintBuffer&nbsp;$buffer&nbsp;The&nbsp;buffer&nbsp;to&nbsp;use.<br /><a name="l890" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;InvalidArgumentException&nbsp;Where&nbsp;the&nbsp;buffer&nbsp;is&nbsp;already&nbsp;attached&nbsp;to&nbsp;a&nbsp;different&nbsp;printer.<br /><a name="l891" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l892" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">setPrintBuffer</span><span style="color: #007700">(</span><span style="color: #0000BB">PrintBuffer&nbsp;$buffer</span><span style="color: #007700">)<br /><a name="l893" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l894" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$buffer&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">buffer</span><span style="color: #007700">)&nbsp;{<br /><a name="l895" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br /><a name="l896" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l897" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$buffer&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">getPrinter</span><span style="color: #007700">()&nbsp;!=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)&nbsp;{<br /><a name="l898" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;</span><span style="color: #0000BB">InvalidArgumentException</span><span style="color: #007700">(</span><span style="color: #DD0000">"This&nbsp;buffer&nbsp;is&nbsp;already&nbsp;attached&nbsp;to&nbsp;a&nbsp;printer."</span><span style="color: #007700">);<br /><a name="l899" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l900" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">buffer&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)&nbsp;{<br /><a name="l901" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">buffer&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">setPrinter</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">);<br /><a name="l902" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l903" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">buffer&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$buffer</span><span style="color: #007700">;<br /><a name="l904" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">buffer&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">setPrinter</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">);<br /><a name="l905" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l906" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l907" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l908" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Set&nbsp;black/white&nbsp;reverse&nbsp;mode&nbsp;on&nbsp;or&nbsp;off.&nbsp;In&nbsp;this&nbsp;mode,&nbsp;text&nbsp;is&nbsp;printed&nbsp;white&nbsp;on&nbsp;a&nbsp;black&nbsp;background.<br /><a name="l909" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l910" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;boolean&nbsp;$on&nbsp;True&nbsp;to&nbsp;enable,&nbsp;false&nbsp;to&nbsp;disable.<br /><a name="l911" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l912" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">setReverseColors</span><span style="color: #007700">(</span><span style="color: #0000BB">$on&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br /><a name="l913" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l914" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateBoolean</span><span style="color: #007700">(</span><span style="color: #0000BB">$on</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l915" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">GS&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"B"&nbsp;</span><span style="color: #007700">.&nbsp;(</span><span style="color: #0000BB">$on&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">)&nbsp;:&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">)));<br /><a name="l916" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l917" /><br /><a name="l918" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l919" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Set&nbsp;the&nbsp;size&nbsp;of&nbsp;text,&nbsp;as&nbsp;a&nbsp;multiple&nbsp;of&nbsp;the&nbsp;normal&nbsp;size.<br /><a name="l920" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l921" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$widthMultiplier&nbsp;Multiple&nbsp;of&nbsp;the&nbsp;regular&nbsp;height&nbsp;to&nbsp;use&nbsp;(range&nbsp;1&nbsp;-&nbsp;8)<br /><a name="l922" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$heightMultiplier&nbsp;Multiple&nbsp;of&nbsp;the&nbsp;regular&nbsp;height&nbsp;to&nbsp;use&nbsp;(range&nbsp;1&nbsp;-&nbsp;8)<br /><a name="l923" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l924" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">setTextSize</span><span style="color: #007700">(</span><span style="color: #0000BB">$widthMultiplier</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$heightMultiplier</span><span style="color: #007700">)<br /><a name="l925" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l926" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$widthMultiplier</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">8</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l927" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$heightMultiplier</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">8</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l928" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">pow</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">)&nbsp;*&nbsp;(</span><span style="color: #0000BB">$widthMultiplier&nbsp;</span><span style="color: #007700">-&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">)&nbsp;+&nbsp;(</span><span style="color: #0000BB">$heightMultiplier&nbsp;</span><span style="color: #007700">-&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><a name="l929" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">GS&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"!"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">));<br /><a name="l930" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l931" /><br /><a name="l932" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l933" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Set&nbsp;underline&nbsp;for&nbsp;printed&nbsp;text.<br /><a name="l934" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l935" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Argument&nbsp;can&nbsp;be&nbsp;true/false,&nbsp;or&nbsp;one&nbsp;of&nbsp;UNDERLINE_NONE,<br /><a name="l936" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;UNDERLINE_SINGLE&nbsp;or&nbsp;UNDERLINE_DOUBLE.<br /><a name="l937" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l938" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$underline&nbsp;Either&nbsp;true/false,&nbsp;or&nbsp;one&nbsp;of&nbsp;Printer::UNDERLINE_NONE,&nbsp;Printer::UNDERLINE_SINGLE&nbsp;or&nbsp;Printer::UNDERLINE_DOUBLE.&nbsp;Defaults&nbsp;to&nbsp;Printer::UNDERLINE_SINGLE.<br /><a name="l939" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l940" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">setUnderline</span><span style="color: #007700">(</span><span style="color: #0000BB">$underline&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">UNDERLINE_SINGLE</span><span style="color: #007700">)<br /><a name="l941" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l942" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Map&nbsp;true/false&nbsp;to&nbsp;underline&nbsp;constants&nbsp;*/<br /><a name="l943" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$underline&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">)&nbsp;{<br /><a name="l944" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$underline&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">UNDERLINE_SINGLE</span><span style="color: #007700">;<br /><a name="l945" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;(</span><span style="color: #0000BB">$underline&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&nbsp;{<br /><a name="l946" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$underline&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">UNDERLINE_NONE</span><span style="color: #007700">;<br /><a name="l947" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l948" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Set&nbsp;the&nbsp;underline&nbsp;*/<br /><a name="l949" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$underline</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l950" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">ESC&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"-"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$underline</span><span style="color: #007700">));<br /><a name="l951" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l952" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l953" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l954" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Add&nbsp;text&nbsp;to&nbsp;the&nbsp;buffer.<br /><a name="l955" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l956" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Text&nbsp;should&nbsp;either&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;line-break,&nbsp;or&nbsp;feed()&nbsp;should&nbsp;be&nbsp;called<br /><a name="l957" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;after&nbsp;this&nbsp;to&nbsp;clear&nbsp;the&nbsp;print&nbsp;buffer.<br /><a name="l958" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l959" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$str&nbsp;Text&nbsp;to&nbsp;print<br /><a name="l960" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l961" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">text</span><span style="color: #007700">(</span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">)<br /><a name="l962" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l963" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateString</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l964" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">buffer&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">writeText</span><span style="color: #007700">((string)</span><span style="color: #0000BB">$str</span><span style="color: #007700">);<br /><a name="l965" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l966" /><br /><a name="l967" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l968" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Add&nbsp;Chinese&nbsp;text&nbsp;to&nbsp;the&nbsp;buffer.&nbsp;This&nbsp;is&nbsp;a&nbsp;specific&nbsp;workaround&nbsp;for&nbsp;the&nbsp;common&nbsp;Zijang&nbsp;printer-&nbsp;The&nbsp;printer&nbsp;will&nbsp;be&nbsp;switched&nbsp;to&nbsp;a&nbsp;two-byte&nbsp;mode&nbsp;and&nbsp;sent&nbsp;GBK-encoded&nbsp;text.<br /><a name="l969" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l970" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Support&nbsp;for&nbsp;this&nbsp;will&nbsp;be&nbsp;merged&nbsp;into&nbsp;a&nbsp;print&nbsp;buffer.<br /><a name="l971" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l972" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$str&nbsp;Text&nbsp;to&nbsp;print,&nbsp;as&nbsp;UTF-8<br /><a name="l973" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l974" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">textChinese</span><span style="color: #007700">(</span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">)<br /><a name="l975" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l976" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateString</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l977" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">FS&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"&amp;"</span><span style="color: #007700">);<br /><a name="l978" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">iconv</span><span style="color: #007700">(</span><span style="color: #DD0000">"UTF-8"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"GBK//IGNORE"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$str</span><span style="color: #007700">);<br /><a name="l979" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">buffer&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">writeTextRaw</span><span style="color: #007700">((string)</span><span style="color: #0000BB">$str</span><span style="color: #007700">);<br /><a name="l980" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">FS&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"."</span><span style="color: #007700">);<br /><a name="l981" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l982" /><br /><a name="l983" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l984" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Add&nbsp;text&nbsp;to&nbsp;the&nbsp;buffer&nbsp;without&nbsp;attempting&nbsp;to&nbsp;interpret&nbsp;chararacter&nbsp;codes.<br /><a name="l985" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l986" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Text&nbsp;should&nbsp;either&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;line-break,&nbsp;or&nbsp;feed()&nbsp;should&nbsp;be&nbsp;called<br /><a name="l987" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;after&nbsp;this&nbsp;to&nbsp;clear&nbsp;the&nbsp;print&nbsp;buffer.<br /><a name="l988" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l989" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$str&nbsp;Text&nbsp;to&nbsp;print<br /><a name="l990" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l991" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">textRaw</span><span style="color: #007700">(</span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">)<br /><a name="l992" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l993" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateString</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l994" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">buffer&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">writeTextRaw</span><span style="color: #007700">((string)</span><span style="color: #0000BB">$str</span><span style="color: #007700">);<br /><a name="l995" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l996" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l997" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l998" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Wrapper&nbsp;for&nbsp;GS&nbsp;(&nbsp;k,&nbsp;to&nbsp;calculate&nbsp;and&nbsp;send&nbsp;correct&nbsp;data&nbsp;length.<br /><a name="l999" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l1000" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$fn&nbsp;Function&nbsp;to&nbsp;use<br /><a name="l1001" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$cn&nbsp;Output&nbsp;code&nbsp;type.&nbsp;Affects&nbsp;available&nbsp;data<br /><a name="l1002" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$data&nbsp;Data&nbsp;to&nbsp;send.<br /><a name="l1003" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$m&nbsp;Modifier/variant&nbsp;for&nbsp;function.&nbsp;Often&nbsp;'0'&nbsp;where&nbsp;used.<br /><a name="l1004" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;InvalidArgumentException&nbsp;Where&nbsp;the&nbsp;input&nbsp;lengths&nbsp;are&nbsp;bad.<br /><a name="l1005" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l1006" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;function&nbsp;</span><span style="color: #0000BB">wrapperSend2dCodeData</span><span style="color: #007700">(</span><span style="color: #0000BB">$fn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$cn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br /><a name="l1007" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l1008" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$m</span><span style="color: #007700">)&nbsp;&gt;&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">||&nbsp;</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$cn</span><span style="color: #007700">)&nbsp;!=&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">||&nbsp;</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$fn</span><span style="color: #007700">)&nbsp;!=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">)&nbsp;{<br /><a name="l1009" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;</span><span style="color: #0000BB">InvalidArgumentException</span><span style="color: #007700">(</span><span style="color: #DD0000">"wrapperSend2dCodeData:&nbsp;cn&nbsp;and&nbsp;fn&nbsp;must&nbsp;be&nbsp;one&nbsp;character&nbsp;each."</span><span style="color: #007700">);<br /><a name="l1010" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l1011" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$header&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">intLowHigh</span><span style="color: #007700">(</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">)&nbsp;+&nbsp;</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$m</span><span style="color: #007700">)&nbsp;+&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /><a name="l1012" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">GS&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"(k"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$header&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$cn&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$fn&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">);<br /><a name="l1013" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l1014" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l1015" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l1016" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Wrapper&nbsp;for&nbsp;GS&nbsp;(&nbsp;L,&nbsp;to&nbsp;calculate&nbsp;and&nbsp;send&nbsp;correct&nbsp;data&nbsp;length.<br /><a name="l1017" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l1018" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$m&nbsp;Modifier/variant&nbsp;for&nbsp;function.&nbsp;Usually&nbsp;'0'.<br /><a name="l1019" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$fn&nbsp;Function&nbsp;number&nbsp;to&nbsp;use,&nbsp;as&nbsp;character.<br /><a name="l1020" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$data&nbsp;Data&nbsp;to&nbsp;send.<br /><a name="l1021" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;InvalidArgumentException&nbsp;Where&nbsp;the&nbsp;input&nbsp;lengths&nbsp;are&nbsp;bad.<br /><a name="l1022" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l1023" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;function&nbsp;</span><span style="color: #0000BB">wrapperSendGraphicsData</span><span style="color: #007700">(</span><span style="color: #0000BB">$m</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$fn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br /><a name="l1024" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l1025" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$m</span><span style="color: #007700">)&nbsp;!=&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">||&nbsp;</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$fn</span><span style="color: #007700">)&nbsp;!=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">)&nbsp;{<br /><a name="l1026" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;</span><span style="color: #0000BB">InvalidArgumentException</span><span style="color: #007700">(</span><span style="color: #DD0000">"wrapperSendGraphicsData:&nbsp;m&nbsp;and&nbsp;fn&nbsp;must&nbsp;be&nbsp;one&nbsp;character&nbsp;each."</span><span style="color: #007700">);<br /><a name="l1027" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l1028" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$header&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">intLowHigh</span><span style="color: #007700">(</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">)&nbsp;+&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /><a name="l1029" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">connector&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">GS&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"(L"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$header&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$fn&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">);<br /><a name="l1030" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l1031" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l1032" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l1033" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Convert&nbsp;widths&nbsp;and&nbsp;heights&nbsp;to&nbsp;characters.&nbsp;Used&nbsp;before&nbsp;sending&nbsp;graphics&nbsp;to&nbsp;set&nbsp;the&nbsp;size.<br /><a name="l1034" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l1035" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$inputs<br /><a name="l1036" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;boolean&nbsp;$long&nbsp;True&nbsp;to&nbsp;use&nbsp;4&nbsp;bytes,&nbsp;false&nbsp;to&nbsp;use&nbsp;2<br /><a name="l1037" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string<br /><a name="l1038" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l1039" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;static&nbsp;function&nbsp;</span><span style="color: #0000BB">dataHeader</span><span style="color: #007700">(array&nbsp;</span><span style="color: #0000BB">$inputs</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$long&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br /><a name="l1040" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l1041" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$outp&nbsp;</span><span style="color: #007700">=&nbsp;array();<br /><a name="l1042" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$inputs&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$input</span><span style="color: #007700">)&nbsp;{<br /><a name="l1043" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$long</span><span style="color: #007700">)&nbsp;{<br /><a name="l1044" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$outp</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">Printer</span><span style="color: #007700">::</span><span style="color: #0000BB">intLowHigh</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /><a name="l1045" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br /><a name="l1046" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">255</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l1047" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$outp</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">);<br /><a name="l1048" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l1049" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l1050" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$outp</span><span style="color: #007700">);<br /><a name="l1051" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l1052" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l1053" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l1054" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Generate&nbsp;two&nbsp;characters&nbsp;for&nbsp;a&nbsp;number:&nbsp;In&nbsp;lower&nbsp;and&nbsp;higher&nbsp;parts,&nbsp;or&nbsp;more&nbsp;parts&nbsp;as&nbsp;needed.<br /><a name="l1055" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l1056" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$input&nbsp;Input&nbsp;number<br /><a name="l1057" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$length&nbsp;The&nbsp;number&nbsp;of&nbsp;bytes&nbsp;to&nbsp;output&nbsp;(1&nbsp;-&nbsp;4).<br /><a name="l1058" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l1059" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;static&nbsp;function&nbsp;</span><span style="color: #0000BB">intLowHigh</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$length</span><span style="color: #007700">)<br /><a name="l1060" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l1061" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$maxInput&nbsp;</span><span style="color: #007700">=&nbsp;(</span><span style="color: #0000BB">256&nbsp;</span><span style="color: #007700">&lt;&lt;&nbsp;(</span><span style="color: #0000BB">$length&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">8</span><span style="color: #007700">)&nbsp;-&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><a name="l1062" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$length</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l1063" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$maxInput</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">);<br /><a name="l1064" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$outp&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">;<br /><a name="l1065" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">$length</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)&nbsp;{<br /><a name="l1066" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$outp&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #0000BB">chr</span><span style="color: #007700">(</span><span style="color: #0000BB">$input&nbsp;</span><span style="color: #007700">%&nbsp;</span><span style="color: #0000BB">256</span><span style="color: #007700">);<br /><a name="l1067" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$input&nbsp;</span><span style="color: #007700">=&nbsp;(int)(</span><span style="color: #0000BB">$input&nbsp;</span><span style="color: #007700">/&nbsp;</span><span style="color: #0000BB">256</span><span style="color: #007700">);<br /><a name="l1068" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l1069" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$outp</span><span style="color: #007700">;<br /><a name="l1070" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l1071" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l1072" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l1073" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Throw&nbsp;an&nbsp;exception&nbsp;if&nbsp;the&nbsp;argument&nbsp;given&nbsp;is&nbsp;not&nbsp;a&nbsp;boolean<br /><a name="l1074" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l1075" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;boolean&nbsp;$test&nbsp;the&nbsp;input&nbsp;to&nbsp;test<br /><a name="l1076" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$source&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;function&nbsp;calling&nbsp;this<br /><a name="l1077" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l1078" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;static&nbsp;function&nbsp;</span><span style="color: #0000BB">validateBoolean</span><span style="color: #007700">(</span><span style="color: #0000BB">$test</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$source</span><span style="color: #007700">)<br /><a name="l1079" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l1080" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!(</span><span style="color: #0000BB">$test&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">true&nbsp;</span><span style="color: #007700">||&nbsp;</span><span style="color: #0000BB">$test&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">))&nbsp;{<br /><a name="l1081" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;</span><span style="color: #0000BB">InvalidArgumentException</span><span style="color: #007700">(</span><span style="color: #DD0000">"Argument&nbsp;to&nbsp;</span><span style="color: #0000BB">$source</span><span style="color: #DD0000">&nbsp;must&nbsp;be&nbsp;a&nbsp;boolean"</span><span style="color: #007700">);<br /><a name="l1082" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l1083" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l1084" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l1085" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l1086" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Throw&nbsp;an&nbsp;exception&nbsp;if&nbsp;the&nbsp;argument&nbsp;given&nbsp;is&nbsp;not&nbsp;an&nbsp;integer&nbsp;within&nbsp;the&nbsp;specified&nbsp;range<br /><a name="l1087" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l1088" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$test&nbsp;the&nbsp;input&nbsp;to&nbsp;test<br /><a name="l1089" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$min&nbsp;the&nbsp;minimum&nbsp;allowable&nbsp;value&nbsp;(inclusive)<br /><a name="l1090" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$max&nbsp;the&nbsp;maximum&nbsp;allowable&nbsp;value&nbsp;(inclusive)<br /><a name="l1091" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$source&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;function&nbsp;calling&nbsp;this<br /><a name="l1092" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$argument&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;invalid&nbsp;parameter<br /><a name="l1093" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l1094" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;static&nbsp;function&nbsp;</span><span style="color: #0000BB">validateInteger</span><span style="color: #007700">(</span><span style="color: #0000BB">$test</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$min</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$max</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$source</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$argument&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"Argument"</span><span style="color: #007700">)<br /><a name="l1095" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l1096" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">validateIntegerMulti</span><span style="color: #007700">(</span><span style="color: #0000BB">$test</span><span style="color: #007700">,&nbsp;array(array(</span><span style="color: #0000BB">$min</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$max</span><span style="color: #007700">)),&nbsp;</span><span style="color: #0000BB">$source</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$argument</span><span style="color: #007700">);<br /><a name="l1097" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l1098" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l1099" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l1100" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Throw&nbsp;an&nbsp;exception&nbsp;if&nbsp;the&nbsp;argument&nbsp;given&nbsp;is&nbsp;not&nbsp;an&nbsp;integer&nbsp;within&nbsp;one&nbsp;of&nbsp;the&nbsp;specified&nbsp;ranges<br /><a name="l1101" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l1102" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$test&nbsp;the&nbsp;input&nbsp;to&nbsp;test<br /><a name="l1103" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;arrray&nbsp;$ranges&nbsp;array&nbsp;of&nbsp;two-item&nbsp;min/max&nbsp;ranges.<br /><a name="l1104" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$source&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;function&nbsp;calling&nbsp;this<br /><a name="l1105" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$source&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;function&nbsp;calling&nbsp;this<br /><a name="l1106" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$argument&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;invalid&nbsp;parameter<br /><a name="l1107" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l1108" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;static&nbsp;function&nbsp;</span><span style="color: #0000BB">validateIntegerMulti</span><span style="color: #007700">(</span><span style="color: #0000BB">$test</span><span style="color: #007700">,&nbsp;array&nbsp;</span><span style="color: #0000BB">$ranges</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$source</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$argument&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"Argument"</span><span style="color: #007700">)<br /><a name="l1109" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l1110" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">is_integer</span><span style="color: #007700">(</span><span style="color: #0000BB">$test</span><span style="color: #007700">))&nbsp;{<br /><a name="l1111" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;</span><span style="color: #0000BB">InvalidArgumentException</span><span style="color: #007700">(</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$argument</span><span style="color: #DD0000">&nbsp;given&nbsp;to&nbsp;</span><span style="color: #0000BB">$source</span><span style="color: #DD0000">&nbsp;must&nbsp;be&nbsp;a&nbsp;number,&nbsp;but&nbsp;'</span><span style="color: #0000BB">$test</span><span style="color: #DD0000">'&nbsp;was&nbsp;given."</span><span style="color: #007700">);<br /><a name="l1112" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l1113" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$match&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br /><a name="l1114" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$ranges&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$range</span><span style="color: #007700">)&nbsp;{<br /><a name="l1115" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$match&nbsp;</span><span style="color: #007700">|=&nbsp;</span><span style="color: #0000BB">$test&nbsp;</span><span style="color: #007700">&gt;=&nbsp;</span><span style="color: #0000BB">$range</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">$test&nbsp;</span><span style="color: #007700">&lt;=&nbsp;</span><span style="color: #0000BB">$range</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">];<br /><a name="l1116" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l1117" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$match</span><span style="color: #007700">)&nbsp;{<br /><a name="l1118" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Put&nbsp;together&nbsp;a&nbsp;good&nbsp;error&nbsp;"range&nbsp;1-2&nbsp;or&nbsp;4-6"<br /><a name="l1119" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rangeStr&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"range&nbsp;"</span><span style="color: #007700">;<br /><a name="l1120" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$ranges</span><span style="color: #007700">);&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)&nbsp;{<br /><a name="l1121" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rangeStr&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #0000BB">$ranges</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"-"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$ranges</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">1</span><span style="color: #007700">];<br /><a name="l1122" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$ranges</span><span style="color: #007700">)&nbsp;-&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">)&nbsp;{<br /><a name="l1123" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;<br /><a name="l1124" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;(</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$ranges</span><span style="color: #007700">)&nbsp;-&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">)&nbsp;{<br /><a name="l1125" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rangeStr&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">"&nbsp;or&nbsp;"</span><span style="color: #007700">;<br /><a name="l1126" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br /><a name="l1127" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rangeStr&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">",&nbsp;"</span><span style="color: #007700">;<br /><a name="l1128" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l1129" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l1130" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;</span><span style="color: #0000BB">InvalidArgumentException</span><span style="color: #007700">(</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$argument</span><span style="color: #DD0000">&nbsp;given&nbsp;to&nbsp;</span><span style="color: #0000BB">$source</span><span style="color: #DD0000">&nbsp;must&nbsp;be&nbsp;in&nbsp;</span><span style="color: #0000BB">$rangeStr</span><span style="color: #DD0000">,&nbsp;but&nbsp;</span><span style="color: #0000BB">$test</span><span style="color: #DD0000">&nbsp;was&nbsp;given."</span><span style="color: #007700">);<br /><a name="l1131" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l1132" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l1133" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l1134" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l1135" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Throw&nbsp;an&nbsp;exception&nbsp;if&nbsp;the&nbsp;argument&nbsp;given&nbsp;can't&nbsp;be&nbsp;cast&nbsp;to&nbsp;a&nbsp;string<br /><a name="l1136" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l1137" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$test&nbsp;the&nbsp;input&nbsp;to&nbsp;test<br /><a name="l1138" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$source&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;function&nbsp;calling&nbsp;this<br /><a name="l1139" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$argument&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;parameter&nbsp;being&nbsp;validated<br /><a name="l1140" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;InvalidArgumentException&nbsp;Where&nbsp;the&nbsp;argument&nbsp;is&nbsp;not&nbsp;valid<br /><a name="l1141" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l1142" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;static&nbsp;function&nbsp;</span><span style="color: #0000BB">validateString</span><span style="color: #007700">(</span><span style="color: #0000BB">$test</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$source</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$argument&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"Argument"</span><span style="color: #007700">)<br /><a name="l1143" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l1144" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">is_object</span><span style="color: #007700">(</span><span style="color: #0000BB">$test</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;!</span><span style="color: #0000BB">method_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$test</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'__toString'</span><span style="color: #007700">))&nbsp;{<br /><a name="l1145" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;</span><span style="color: #0000BB">InvalidArgumentException</span><span style="color: #007700">(</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$argument</span><span style="color: #DD0000">&nbsp;to&nbsp;</span><span style="color: #0000BB">$source</span><span style="color: #DD0000">&nbsp;must&nbsp;be&nbsp;a&nbsp;string"</span><span style="color: #007700">);<br /><a name="l1146" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l1147" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l1148" />&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l1149" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br /><a name="l1150" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Throw&nbsp;an&nbsp;exception&nbsp;if&nbsp;the&nbsp;argument&nbsp;doesn't&nbsp;match&nbsp;the&nbsp;given&nbsp;regex.<br /><a name="l1151" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /><a name="l1152" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$test&nbsp;the&nbsp;input&nbsp;to&nbsp;test<br /><a name="l1153" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$source&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;function&nbsp;calling&nbsp;this<br /><a name="l1154" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$regex&nbsp;valid&nbsp;values&nbsp;for&nbsp;this&nbsp;attribute,&nbsp;as&nbsp;a&nbsp;regex<br /><a name="l1155" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$argument&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;parameter&nbsp;being&nbsp;validated<br /><a name="l1156" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;InvalidArgumentException&nbsp;Where&nbsp;the&nbsp;argument&nbsp;is&nbsp;not&nbsp;valid<br /><a name="l1157" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><a name="l1158" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;static&nbsp;function&nbsp;</span><span style="color: #0000BB">validateStringRegex</span><span style="color: #007700">(</span><span style="color: #0000BB">$test</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$source</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$regex</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$argument&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"Argument"</span><span style="color: #007700">)<br /><a name="l1159" />&nbsp;&nbsp;&nbsp;&nbsp;{<br /><a name="l1160" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #0000BB">$regex</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$test</span><span style="color: #007700">)&nbsp;===&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;{<br /><a name="l1161" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;</span><span style="color: #0000BB">InvalidArgumentException</span><span style="color: #007700">(</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$argument</span><span style="color: #DD0000">&nbsp;given&nbsp;to&nbsp;</span><span style="color: #0000BB">$source</span><span style="color: #DD0000">&nbsp;is&nbsp;invalid.&nbsp;It&nbsp;should&nbsp;match&nbsp;regex&nbsp;'</span><span style="color: #0000BB">$regex</span><span style="color: #DD0000">',&nbsp;but&nbsp;'</span><span style="color: #0000BB">$test</span><span style="color: #DD0000">'&nbsp;was&nbsp;given."</span><span style="color: #007700">);<br /><a name="l1162" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l1163" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l1164" />}<br /><a name="l1165" /></span>
</span>