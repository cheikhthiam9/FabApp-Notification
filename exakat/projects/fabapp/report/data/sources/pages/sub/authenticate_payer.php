<span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><a name="l1" /><br /><a name="l2" /><br /><a name="l3" /></span><span style="color: #FF8000">/***********************************************************************************************************<br /><a name="l4" />*&nbsp;&nbsp;&nbsp;&nbsp;<br /><a name="l5" />*&nbsp;&nbsp;&nbsp;&nbsp;@author&nbsp;MPZinke<br /><a name="l6" />*&nbsp;&nbsp;&nbsp;&nbsp;CC&nbsp;BY-NC-AS&nbsp;UTA&nbsp;FabLab&nbsp;2016-2019<br /><a name="l7" />*&nbsp;&nbsp;&nbsp;&nbsp;FabApp&nbsp;V&nbsp;.94<br /><a name="l8" />*<br /><a name="l9" />*&nbsp;&nbsp;&nbsp;&nbsp;DESCRIPTION:&nbsp;check&nbsp;if&nbsp;the&nbsp;user&nbsp;(passed&nbsp;through&nbsp;INPUT_GET)&nbsp;is&nbsp;valid&nbsp;to&nbsp;pick&nbsp;up&nbsp;print.&nbsp;&nbsp;<br /><a name="l10" />*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Echo&nbsp;JSON&nbsp;of&nbsp;whether&nbsp;user&nbsp;is&nbsp;valid<br /><a name="l11" />*&nbsp;&nbsp;&nbsp;&nbsp;FUTURE:<br /><a name="l12" />*&nbsp;&nbsp;&nbsp;&nbsp;BUGS:<br /><a name="l13" />*<br /><a name="l14" />***********************************************************************************************************/<br /><a name="l15" /></span><span style="color: #007700">include_once&nbsp;(</span><span style="color: #0000BB">filter_input</span><span style="color: #007700">(</span><span style="color: #0000BB">INPUT_SERVER</span><span style="color: #007700">,</span><span style="color: #DD0000">'DOCUMENT_ROOT'</span><span style="color: #007700">).</span><span style="color: #DD0000">'/connections/db_connect8.php'</span><span style="color: #007700">);<br /><a name="l16" />include_once&nbsp;(</span><span style="color: #0000BB">filter_input</span><span style="color: #007700">(</span><span style="color: #0000BB">INPUT_SERVER</span><span style="color: #007700">,</span><span style="color: #DD0000">'DOCUMENT_ROOT'</span><span style="color: #007700">).</span><span style="color: #DD0000">'/class/all_classes.php'</span><span style="color: #007700">);<br /><a name="l17" /><br /><a name="l18" />if(isset(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">"trans_id"</span><span style="color: #007700">])&nbsp;&amp;&amp;&nbsp;isset(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">"payer"</span><span style="color: #007700">]))&nbsp;{<br /><a name="l19" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$trans_id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">"trans_id"</span><span style="color: #007700">];<br /><a name="l20" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$payer&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">"payer"</span><span style="color: #007700">];<br /><a name="l21" />&nbsp;&nbsp;&nbsp;&nbsp;if(</span><span style="color: #0000BB">Transactions</span><span style="color: #007700">::</span><span style="color: #0000BB">regexTrans</span><span style="color: #007700">(</span><span style="color: #0000BB">$trans_id</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">Users</span><span style="color: #007700">::</span><span style="color: #0000BB">regexUser</span><span style="color: #007700">(</span><span style="color: #0000BB">$payer</span><span style="color: #007700">))&nbsp;{<br /><a name="l22" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"approved"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">AuthRecipients</span><span style="color: #007700">::</span><span style="color: #0000BB">validatePickUp</span><span style="color: #007700">(</span><span style="color: #0000BB">$trans_id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$payer</span><span style="color: #007700">)));<br /><a name="l23" />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><a name="l24" />}<br /><a name="l25" /><br /><a name="l26" /></span><span style="color: #0000BB">?&gt;</span>
</span>